[{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\breakdown\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\chat\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\explain\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\extract\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\motivation\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\parse-expense\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\ai\\quiz\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\auth\\google\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\auth\\google\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\google\\calendar\\route.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3600,3603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3600,3603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\google\\sync\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'NextRequest' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":21,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"NextRequest"},"fix":{"range":[9,21],"text":""},"desc":"Remove unused variable \"NextRequest\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { getTasksClient, GoogleTokens } from '@/lib/google'\r\n\r\n// POST: Sync local tasks to Google Tasks\r\nexport async function POST() {\r\n    try {\r\n        const supabase = await createClient()\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n\r\n        if (!user) {\r\n            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n        }\r\n\r\n        const { data: profile } = await supabase\r\n            .from('profiles')\r\n            .select('google_tokens, google_connected')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        if (!profile?.google_connected || !profile?.google_tokens) {\r\n            return NextResponse.json({ error: 'Google not connected' }, { status: 400 })\r\n        }\r\n\r\n        const tokens = profile.google_tokens as GoogleTokens\r\n        const tasksClient = getTasksClient(tokens)\r\n\r\n        // Get local tasks that aren't synced yet\r\n        const { data: localTasks } = await supabase\r\n            .from('tasks')\r\n            .select('*')\r\n            .eq('user_id', user.id)\r\n            .is('google_task_id', null)\r\n\r\n        let syncedCount = 0\r\n\r\n        if (localTasks && localTasks.length > 0) {\r\n            // Get default task list\r\n            const taskListsResponse = await tasksClient.tasklists.list({ maxResults: 1 })\r\n            const listId = taskListsResponse.data.items?.[0]?.id\r\n\r\n            if (listId) {\r\n                for (const task of localTasks) {\r\n                    try {\r\n                        const response = await tasksClient.tasks.insert({\r\n                            tasklist: listId,\r\n                            requestBody: {\r\n                                title: task.title,\r\n                                notes: task.description || undefined,\r\n                                due: task.due_date ? new Date(task.due_date).toISOString() : undefined,\r\n                                status: task.status === 'done' ? 'completed' : 'needsAction',\r\n                            },\r\n                        })\r\n\r\n                        // Update local task with Google ID\r\n                        await supabase\r\n                            .from('tasks')\r\n                            .update({ google_task_id: response.data.id })\r\n                            .eq('id', task.id)\r\n\r\n                        syncedCount++\r\n                    } catch (e) {\r\n                        console.error('Failed to sync task:', task.id, e)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            synced: syncedCount,\r\n            message: `Synced ${syncedCount} tasks to Google`\r\n        })\r\n\r\n    } catch (error: unknown) {\r\n        console.error('Sync error:', error)\r\n        const errorMessage = error instanceof Error ? error.message : 'Sync failed';\r\n        return NextResponse.json({ error: errorMessage }, { status: 500 })\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\api\\google\\tasks\\route.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1510,1513],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1510,1513],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\auth\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\budget\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":192,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":192,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog'\r\nimport {\r\n    Wallet,\r\n    TrendingUp,\r\n    TrendingDown,\r\n    IndianRupee,\r\n    Plus,\r\n    ShoppingBag,\r\n    Coffee,\r\n    Book,\r\n    Bus,\r\n    Monitor,\r\n    Trash2,\r\n    Loader2,\r\n    Pencil,\r\n    Check,\r\n    X,\r\n    MessageSquare,\r\n    Sparkles\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { toast } from 'sonner'\r\n\r\ninterface Expense {\r\n    id: string\r\n    amount: number\r\n    category: string\r\n    description: string\r\n    expense_date: string\r\n    created_at: string\r\n}\r\n\r\nconst categories = [\r\n    { id: 'food', label: 'Food & Dining', icon: Coffee, color: 'text-orange-400 bg-orange-500/10 border-orange-500/30' },\r\n    { id: 'transport', label: 'Transportation', icon: Bus, color: 'text-blue-400 bg-blue-500/10 border-blue-500/30' },\r\n    { id: 'entertainment', label: 'Entertainment', icon: Monitor, color: 'text-purple-400 bg-purple-500/10 border-purple-500/30' },\r\n    { id: 'shopping', label: 'Shopping', icon: ShoppingBag, color: 'text-pink-400 bg-pink-500/10 border-pink-500/30' },\r\n    { id: 'education', label: 'Education', icon: Book, color: 'text-emerald-400 bg-emerald-500/10 border-emerald-500/30' },\r\n    { id: 'other', label: 'Other', icon: Wallet, color: 'text-gray-400 bg-gray-500/10 border-gray-500/30' },\r\n]\r\n\r\nexport default function BudgetPage() {\r\n    const [expenses, setExpenses] = useState<Expense[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [monthlyBudget, setMonthlyBudget] = useState(0)\r\n\r\n    // Budget Editing\r\n    const [isEditingBudget, setIsEditingBudget] = useState(false)\r\n    const [tempBudget, setTempBudget] = useState('')\r\n    const [isSavingBudget, setIsSavingBudget] = useState(false)\r\n\r\n    // Add Expense Form\r\n    const [showAddForm, setShowAddForm] = useState(false)\r\n    const [newExpense, setNewExpense] = useState({\r\n        description: '',\r\n        amount: '',\r\n        category: 'food'\r\n    })\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    // Add Money (income from parents)\r\n    const [showAddMoney, setShowAddMoney] = useState(false)\r\n    const [addMoneyAmount, setAddMoneyAmount] = useState('')\r\n\r\n    // SMS Parsing\r\n    const [showSmsDialog, setShowSmsDialog] = useState(false)\r\n    const [smsText, setSmsText] = useState('')\r\n    const [isParsing, setIsParsing] = useState(false)\r\n\r\n    const supabase = createClient()\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const { data: { user } } = await supabase.auth.getUser()\r\n                if (!user) return\r\n\r\n                // 1. Fetch Expenses\r\n                const { data: expensesData, error: expensesError } = await supabase\r\n                    .from('expenses')\r\n                    .select('*')\r\n                    .eq('user_id', user.id)\r\n                    .order('expense_date', { ascending: false })\r\n\r\n                if (expensesError) {\r\n                    console.error('Error fetching expenses:', expensesError)\r\n                    throw new Error(expensesError.message || JSON.stringify(expensesError))\r\n                }\r\n                setExpenses(expensesData || [])\r\n\r\n                // 2. Fetch Budget (Graceful handling)\r\n                const { data: profileData, error: profileError } = await supabase\r\n                    .from('profiles')\r\n                    .select('monthly_budget')\r\n                    .eq('id', user.id)\r\n                    .single()\r\n\r\n                if (profileError) {\r\n                    console.warn('Could not fetch budget (using default 0):', profileError)\r\n                }\r\n\r\n                if (profileData?.monthly_budget) {\r\n                    setMonthlyBudget(Number(profileData.monthly_budget))\r\n                }\r\n\r\n            } catch (error: unknown) {\r\n                console.error('Error fetching data:', error)\r\n                const errorMessage = error instanceof Error ? error.message : 'Failed to load budget data';\r\n                toast.error(errorMessage)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        fetchData()\r\n    }, [supabase])\r\n\r\n    const updateBudget = async () => {\r\n        const amount = parseFloat(tempBudget)\r\n        if (isNaN(amount) || amount < 0) {\r\n            toast.error('Please enter a valid amount')\r\n            return\r\n        }\r\n\r\n        try {\r\n            setIsSavingBudget(true)\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (!user) return\r\n\r\n            const { error } = await supabase\r\n                .from('profiles')\r\n                .update({ monthly_budget: amount })\r\n                .eq('id', user.id)\r\n\r\n            if (error) throw error\r\n\r\n            setMonthlyBudget(amount)\r\n            setIsEditingBudget(false)\r\n            toast.success('Budget updated')\r\n        } catch (error) {\r\n            console.error('Error updating budget:', error)\r\n            toast.error('Failed to update budget')\r\n        } finally {\r\n            setIsSavingBudget(false)\r\n        }\r\n    }\r\n\r\n    const startEditing = () => {\r\n        setTempBudget(monthlyBudget.toString())\r\n        setIsEditingBudget(true)\r\n    }\r\n\r\n    // Add money to current balance\r\n    const addMoney = async () => {\r\n        const amount = parseFloat(addMoneyAmount)\r\n        if (isNaN(amount) || amount <= 0) {\r\n            toast.error('Enter a valid amount')\r\n            return\r\n        }\r\n\r\n        try {\r\n            setIsSavingBudget(true)\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (!user) return\r\n\r\n            const newBalance = monthlyBudget + amount\r\n            const { error } = await supabase\r\n                .from('profiles')\r\n                .update({ monthly_budget: newBalance })\r\n                .eq('id', user.id)\r\n\r\n            if (error) throw error\r\n\r\n            setMonthlyBudget(newBalance)\r\n            setShowAddMoney(false)\r\n            setAddMoneyAmount('')\r\n            toast.success(`Added ‚Çπ${amount.toLocaleString()} to balance!`)\r\n        } catch (error) {\r\n            toast.error('Failed to add money')\r\n        } finally {\r\n            setIsSavingBudget(false)\r\n        }\r\n    }\r\n\r\n    const addExpense = async () => {\r\n        if (!newExpense.description || !newExpense.amount) {\r\n            toast.error('Please fill in all fields')\r\n            return\r\n        }\r\n\r\n        try {\r\n            setIsSubmitting(true)\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (!user) {\r\n                toast.error('You must be logged in')\r\n                return\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('expenses')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    description: newExpense.description,\r\n                    amount: parseFloat(newExpense.amount),\r\n                    category: newExpense.category,\r\n                    expense_date: new Date().toISOString()\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) throw error\r\n\r\n            setExpenses([data, ...expenses])\r\n            setNewExpense({ description: '', amount: '', category: 'food' })\r\n            setShowAddForm(false)\r\n            toast.success('Expense added successfully')\r\n        } catch (error) {\r\n            console.error('Error adding expense:', error)\r\n            toast.error('Failed to add expense')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    const parseSmsText = async () => {\r\n        if (!smsText.trim()) {\r\n            toast.error('Please paste SMS or email text')\r\n            return\r\n        }\r\n\r\n        try {\r\n            setIsParsing(true)\r\n            const response = await fetch('/api/ai/parse-expense', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ text: smsText })\r\n            })\r\n\r\n            const result = await response.json()\r\n\r\n            if (!response.ok) {\r\n                throw new Error(result.error || 'Failed to parse')\r\n            }\r\n\r\n            const { data } = result\r\n\r\n            if (data.amount) {\r\n                setNewExpense({\r\n                    description: data.description || '',\r\n                    amount: data.amount.toString(),\r\n                    category: data.category || 'other'\r\n                })\r\n                setShowAddForm(true)\r\n                setShowSmsDialog(false)\r\n                setSmsText('')\r\n                toast.success('Expense extracted! Review and add.')\r\n            } else {\r\n                toast.error('Could not extract amount from text')\r\n            }\r\n        } catch (error: unknown) {\r\n            console.error('Parse error:', error)\r\n            const errorMessage = error instanceof Error ? error.message : 'Failed to parse text';\r\n            toast.error(errorMessage)\r\n        } finally {\r\n            setIsParsing(false)\r\n        }\r\n    }\r\n\r\n    const removeExpense = async (id: string) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('expenses')\r\n                .delete()\r\n                .eq('id', id)\r\n\r\n            if (error) throw error\r\n\r\n            setExpenses(expenses.filter((e) => e.id !== id))\r\n            toast.success('Expense removed')\r\n        } catch (error) {\r\n            console.error('Error removing expense:', error)\r\n            toast.error('Failed to remove expense')\r\n        }\r\n    }\r\n\r\n    const totalSpent = expenses.reduce((sum, item) => sum + item.amount, 0)\r\n    const remaining = monthlyBudget - totalSpent\r\n    const progress = monthlyBudget > 0 ? Math.min((totalSpent / monthlyBudget) * 100, 100) : 0\r\n\r\n    // Student Analytics\r\n    const now = new Date()\r\n    const startOfWeek = new Date(now)\r\n    startOfWeek.setDate(now.getDate() - now.getDay())\r\n    startOfWeek.setHours(0, 0, 0, 0)\r\n\r\n    const startOfLastWeek = new Date(startOfWeek)\r\n    startOfLastWeek.setDate(startOfLastWeek.getDate() - 7)\r\n\r\n    const thisWeekExpenses = expenses.filter(e => new Date(e.expense_date) >= startOfWeek)\r\n    const lastWeekExpenses = expenses.filter(e => {\r\n        const d = new Date(e.expense_date)\r\n        return d >= startOfLastWeek && d < startOfWeek\r\n    })\r\n\r\n    const thisWeekSpent = thisWeekExpenses.reduce((sum, e) => sum + e.amount, 0)\r\n    const lastWeekSpent = lastWeekExpenses.reduce((sum, e) => sum + e.amount, 0)\r\n    const weeklyChange = lastWeekSpent > 0 ? ((thisWeekSpent - lastWeekSpent) / lastWeekSpent * 100) : 0\r\n\r\n    // Daily average (last 30 days)\r\n    const thirtyDaysAgo = new Date(now)\r\n    thirtyDaysAgo.setDate(now.getDate() - 30)\r\n    const last30DaysExpenses = expenses.filter(e => new Date(e.expense_date) >= thirtyDaysAgo)\r\n    const dailyAverage = last30DaysExpenses.length > 0\r\n        ? last30DaysExpenses.reduce((sum, e) => sum + e.amount, 0) / 30\r\n        : 0\r\n\r\n    // Days until balance runs out\r\n    const daysUntilEmpty = dailyAverage > 0 ? Math.floor(remaining / dailyAverage) : Infinity\r\n\r\n    // Low balance threshold (7 days of average spending)\r\n    const lowBalanceThreshold = dailyAverage * 7\r\n    const isLowBalance = remaining < lowBalanceThreshold && remaining > 0\r\n\r\n    const spendingByCategory = categories.map(cat => ({\r\n        ...cat,\r\n        amount: expenses\r\n            .filter(e => e.category === cat.id)\r\n            .reduce((sum, e) => sum + e.amount, 0)\r\n    })).filter(cat => cat.amount > 0).sort((a, b) => b.amount - a.amount)\r\n\r\n    const topCategory = spendingByCategory[0]\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n                <Loader2 className=\"h-8 w-8 text-violet-500 animate-spin\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-white\">Budget Tracker</h1>\r\n                    <p className=\"text-gray-400 mt-1\">Manage your monthly expenses and savings</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    {/* SMS/Email Parse Dialog */}\r\n                    <Dialog open={showSmsDialog} onOpenChange={setShowSmsDialog}>\r\n                        <DialogTrigger asChild>\r\n                            <Button variant=\"outline\" className=\"gap-2 border-violet-500/30 hover:bg-violet-500/10\">\r\n                                <MessageSquare className=\"h-4 w-4 text-violet-400\" />\r\n                                Paste SMS\r\n                            </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent className=\"glass-card border-violet-500/20\">\r\n                            <DialogHeader>\r\n                                <DialogTitle className=\"flex items-center gap-2 text-white\">\r\n                                    <Sparkles className=\"h-5 w-5 text-violet-400\" />\r\n                                    Auto-Extract Expense\r\n                                </DialogTitle>\r\n                            </DialogHeader>\r\n                            <div className=\"space-y-4\">\r\n                                <p className=\"text-sm text-gray-400\">\r\n                                    Paste your bank SMS, UPI notification, or email text below\r\n                                </p>\r\n                                <Textarea\r\n                                    placeholder=\"e.g., Your A/c XX1234 debited by Rs.250.00 on 15-Jan for UPI-Swiggy\"\r\n                                    value={smsText}\r\n                                    onChange={(e) => setSmsText(e.target.value)}\r\n                                    rows={4}\r\n                                    className=\"bg-white/5 border-white/10 focus:border-violet-500/50\"\r\n                                />\r\n                                <Button\r\n                                    onClick={parseSmsText}\r\n                                    disabled={isParsing || !smsText.trim()}\r\n                                    className=\"w-full gradient-primary text-white\"\r\n                                >\r\n                                    {isParsing ? (\r\n                                        <>\r\n                                            <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n                                            Extracting...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Sparkles className=\"h-4 w-4 mr-2\" />\r\n                                            Extract Expense\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n                            </div>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n\r\n                    <Button\r\n                        onClick={() => setShowAddForm(true)}\r\n                        className=\"gradient-primary text-white gap-2\"\r\n                    >\r\n                        <Plus className=\"h-4 w-4\" />\r\n                        Add Expense\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Overview Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center justify-between gap-4\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"p-3 rounded-xl bg-violet-500/20\">\r\n                                    <Wallet className=\"h-6 w-6 text-violet-400\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-gray-400\">Current Balance</p>\r\n                                    {isEditingBudget ? (\r\n                                        <div className=\"flex items-center gap-2 mt-1\">\r\n                                            <Input\r\n                                                type=\"number\"\r\n                                                value={tempBudget}\r\n                                                onChange={(e) => setTempBudget(e.target.value)}\r\n                                                className=\"h-8 w-24 bg-white/10 border-white/20 px-2 text-sm\"\r\n                                                autoFocus\r\n                                            />\r\n                                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-emerald-400 hover:text-emerald-300\" onClick={updateBudget}>\r\n                                                <Check className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-rose-400 hover:text-rose-300\" onClick={() => setIsEditingBudget(false)}>\r\n                                                <X className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <p className=\"text-2xl font-bold text-white\">‚Çπ{monthlyBudget.toLocaleString()}</p>\r\n                                            <button onClick={startEditing} className=\"text-gray-500 hover:text-violet-400 transition-colors\">\r\n                                                <Pencil className=\"h-3 w-3\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                            {/* Add Money Button */}\r\n                            {showAddMoney ? (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Input\r\n                                        type=\"number\"\r\n                                        placeholder=\"Amount\"\r\n                                        value={addMoneyAmount}\r\n                                        onChange={(e) => setAddMoneyAmount(e.target.value)}\r\n                                        className=\"h-8 w-24 bg-white/10 border-white/20 px-2 text-sm\"\r\n                                    />\r\n                                    <Button size=\"icon\" className=\"h-8 w-8 bg-emerald-500 hover:bg-emerald-600\" onClick={addMoney} disabled={isSavingBudget}>\r\n                                        <Check className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                    <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8\" onClick={() => setShowAddMoney(false)}>\r\n                                        <X className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </div>\r\n                            ) : (\r\n                                <Button\r\n                                    size=\"sm\"\r\n                                    className=\"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30 border border-emerald-500/30\"\r\n                                    onClick={() => setShowAddMoney(true)}\r\n                                >\r\n                                    <Plus className=\"h-4 w-4 mr-1\" />\r\n                                    Add Money\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"p-3 rounded-xl bg-rose-500/20\">\r\n                                <TrendingDown className=\"h-6 w-6 text-rose-400\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-sm text-gray-400\">Total Spent</p>\r\n                                <p className=\"text-2xl font-bold text-white\">‚Çπ{totalSpent.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"p-3 rounded-xl bg-emerald-500/20\">\r\n                                <TrendingUp className=\"h-6 w-6 text-emerald-400\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-sm text-gray-400\">Remaining</p>\r\n                                <p className=\"text-2xl font-bold text-white\">‚Çπ{remaining.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Budget Progress */}\r\n            <Card className=\"glass-card border-white/[0.06]\">\r\n                <CardContent className=\"p-6\">\r\n                    <div className=\"flex justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-gray-400\">Balance Used</span>\r\n                        <span className={cn(\"text-sm font-bold\", progress > 90 ? \"text-rose-400\" : \"text-emerald-400\")}>\r\n                            {progress.toFixed(1)}%\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"h-4 bg-white/5 rounded-full overflow-hidden\">\r\n                        <div\r\n                            className={cn(\r\n                                \"h-full rounded-full transition-all duration-500\",\r\n                                progress > 90 ? \"bg-gradient-to-r from-rose-500 to-orange-500\" : \"bg-gradient-to-r from-emerald-500 to-teal-500\"\r\n                            )}\r\n                            style={{ width: `${progress}%` }}\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Low Balance Alert */}\r\n            {isLowBalance && (\r\n                <Card className=\"border-amber-500/30 bg-amber-500/10\">\r\n                    <CardContent className=\"p-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"p-2 rounded-lg bg-amber-500/20\">\r\n                                <Wallet className=\"h-5 w-5 text-amber-400\" />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <p className=\"text-amber-300 font-medium\">Running Low! ‚ö†Ô∏è</p>\r\n                                <p className=\"text-amber-200/70 text-sm\">\r\n                                    ~{daysUntilEmpty} days left at current rate. Maybe time to ask parents? üòÖ\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            )}\r\n\r\n            {/* Student Insights */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {/* This Week */}\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-4\">\r\n                        <p className=\"text-xs text-gray-400 mb-1\">This Week</p>\r\n                        <p className=\"text-xl font-bold text-white\">‚Çπ{thisWeekSpent.toLocaleString()}</p>\r\n                        {lastWeekSpent > 0 && (\r\n                            <p className={cn(\"text-xs mt-1\", weeklyChange > 0 ? \"text-rose-400\" : \"text-emerald-400\")}>\r\n                                {weeklyChange > 0 ? \"‚Üë\" : \"‚Üì\"} {Math.abs(weeklyChange).toFixed(0)}% vs last week\r\n                            </p>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Daily Average */}\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-4\">\r\n                        <p className=\"text-xs text-gray-400 mb-1\">Daily Average</p>\r\n                        <p className=\"text-xl font-bold text-white\">‚Çπ{dailyAverage.toFixed(0)}</p>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">last 30 days</p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Days Left */}\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-4\">\r\n                        <p className=\"text-xs text-gray-400 mb-1\">Balance Lasts</p>\r\n                        <p className=\"text-xl font-bold text-white\">\r\n                            {daysUntilEmpty === Infinity ? \"‚àû\" : `${daysUntilEmpty} days`}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">at current rate</p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Top Category */}\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-4\">\r\n                        <p className=\"text-xs text-gray-400 mb-1\">Top Spending</p>\r\n                        {topCategory ? (\r\n                            <>\r\n                                <p className=\"text-xl font-bold text-white\">{topCategory.label.split(' ')[0]}</p>\r\n                                <p className=\"text-xs text-gray-500 mt-1\">‚Çπ{topCategory.amount.toFixed(0)}</p>\r\n                            </>\r\n                        ) : (\r\n                            <p className=\"text-xl font-bold text-white\">-</p>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Main Content Grid */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Visual Breakdown */}\r\n                <div className=\"lg:col-span-1 space-y-4\">\r\n                    <h3 className=\"text-lg font-semibold text-white\">Spending by Category</h3>\r\n                    {spendingByCategory.length === 0 ? (\r\n                        <div className=\"glass-card p-6 text-center border-white/[0.06]\">\r\n                            <p className=\"text-gray-400 text-sm\">No spending data yet</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {spendingByCategory.map((cat) => (\r\n                                <div key={cat.id} className=\"glass-card p-4 border-white/[0.06]\">\r\n                                    <div className=\"flex items-center justify-between mb-2\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className={cn(\"p-2 rounded-lg\", cat.color)}>\r\n                                                <cat.icon className=\"h-4 w-4\" />\r\n                                            </div>\r\n                                            <span className=\"font-medium text-white\">{cat.label}</span>\r\n                                        </div>\r\n                                        <span className=\"font-bold text-white\">‚Çπ{cat.amount.toFixed(2)}</span>\r\n                                    </div>\r\n                                    <div className=\"h-1.5 bg-white/5 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-white/20 rounded-full\"\r\n                                            style={{ width: `${(cat.amount / totalSpent) * 100}%` }}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Recent Expenses List */}\r\n                <div className=\"lg:col-span-2 space-y-4\">\r\n                    <h3 className=\"text-lg font-semibold text-white\">Recent Expenses</h3>\r\n\r\n                    {/* Add Expense Form */}\r\n                    {showAddForm && (\r\n                        <Card className=\"glass-card border-violet-500/30 bg-violet-500/5 mb-4\">\r\n                            <CardHeader>\r\n                                <CardTitle className=\"text-lg text-white\">Add New Expense</CardTitle>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    <div className=\"md:col-span-2\">\r\n                                        <Label className=\"text-gray-400\">Description</Label>\r\n                                        <Input\r\n                                            placeholder=\"e.g., Grocery shopping\"\r\n                                            value={newExpense.description}\r\n                                            onChange={(e) => setNewExpense({ ...newExpense, description: e.target.value })}\r\n                                            className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-gray-400\">Amount (‚Çπ)</Label>\r\n                                        <Input\r\n                                            type=\"number\"\r\n                                            placeholder=\"0.00\"\r\n                                            value={newExpense.amount}\r\n                                            onChange={(e) => setNewExpense({ ...newExpense, amount: e.target.value })}\r\n                                            className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-gray-400\">Category</Label>\r\n                                        <select\r\n                                            value={newExpense.category}\r\n                                            onChange={(e) => setNewExpense({ ...newExpense, category: e.target.value })}\r\n                                            className=\"w-full h-10 px-3 rounded-md bg-white/5 border border-white/10 text-white mt-1\"\r\n                                        >\r\n                                            {categories.map((cat) => (\r\n                                                <option key={cat.id} value={cat.id} className=\"bg-gray-900\">{cat.label}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex gap-2 mt-4\">\r\n                                    <Button onClick={addExpense} className=\"gradient-primary text-white\" disabled={isSubmitting}>\r\n                                        {isSubmitting ? 'Adding...' : 'Add Expense'}\r\n                                    </Button>\r\n                                    <Button variant=\"ghost\" onClick={() => setShowAddForm(false)} className=\"text-gray-400\" disabled={isSubmitting}>\r\n                                        Cancel\r\n                                    </Button>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    )}\r\n\r\n                    {expenses.length === 0 ? (\r\n                        <Card className=\"glass-card border-white/[0.06]\">\r\n                            <CardContent className=\"p-8 text-center\">\r\n                                <IndianRupee className=\"h-12 w-12 text-gray-600 mx-auto mb-3\" />\r\n                                <p className=\"text-gray-400\">No expenses recorded yet</p>\r\n                                <Button\r\n                                    variant=\"link\"\r\n                                    onClick={() => setShowAddForm(true)}\r\n                                    className=\"text-violet-400 mt-2\"\r\n                                >\r\n                                    Add your first expense\r\n                                </Button>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ) : (\r\n                        <div className=\"space-y-2\">\r\n                            {expenses.map((expense) => {\r\n                                const category = categories.find(c => c.id === expense.category) || categories[5]\r\n                                return (\r\n                                    <div\r\n                                        key={expense.id}\r\n                                        className=\"flex items-center justify-between p-4 rounded-xl bg-white/[0.03] hover:bg-white/[0.06] transition-colors group border border-white/[0.03]\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className={cn(\"p-2.5 rounded-xl\", category.color)}>\r\n                                                <category.icon className=\"h-5 w-5\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-medium text-white\">{expense.description}</p>\r\n                                                <p className=\"text-xs text-gray-400\">{new Date(expense.expense_date).toLocaleDateString()}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <p className=\"font-bold text-white\">‚Çπ{expense.amount.toFixed(2)}</p>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                onClick={() => removeExpense(expense.id)}\r\n                                                className=\"h-8 w-8 text-gray-500 hover:text-rose-400 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\calendar\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\flashcards\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6400,6403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6400,6403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\grades\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":204,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":204,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":222,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":222,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":257,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":257,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":278,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":278,"endColumn":23}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":384,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":384,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13672,13675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13672,13675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":408,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":408,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15181,15184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15181,15184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n    Plus,\r\n    GraduationCap,\r\n    TrendingUp,\r\n    Trash2,\r\n    Loader2,\r\n    ChevronDown,\r\n    ChevronUp,\r\n    BookOpen,\r\n    Pencil\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { toast } from 'sonner'\r\nimport { ImageUploadExtractor } from '@/components/ai/ImageUploadExtractor'\r\nimport {\r\n    Collapsible,\r\n    CollapsibleContent,\r\n    CollapsibleTrigger,\r\n} from '@/components/ui/collapsible'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu'\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogTrigger,\r\n} from '@/components/ui/alert-dialog'\r\n\r\ninterface Course {\r\n    id: string\r\n    name: string\r\n    credits: number\r\n    grade: string\r\n    semester: string\r\n}\r\n\r\nconst gradePoints: Record<string, number> = {\r\n    'S': 10.0,\r\n    'A': 9.0,\r\n    'B': 8.0,\r\n    'C': 7.0,\r\n    'D': 6.0,\r\n    'E': 5.0,\r\n    'F': 0.0,\r\n    'P': 0.0, // Pass (Non-graded), excluded\r\n}\r\n\r\nconst gradeColors: Record<string, string> = {\r\n    'S': 'text-purple-400',\r\n    'A': 'text-emerald-400',\r\n    'B': 'text-emerald-500',\r\n    'C': 'text-blue-400',\r\n    'D': 'text-amber-400',\r\n    'E': 'text-orange-400',\r\n    'F': 'text-rose-400',\r\n    'P': 'text-gray-400',\r\n}\r\n\r\nexport default function GradesPage() {\r\n    const [courses, setCourses] = useState<Course[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [newCourse, setNewCourse] = useState({ name: '', credits: 3, grade: 'S', semester: 'Semester 1' })\r\n    const [showAddForm, setShowAddForm] = useState(false)\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n    const [targetCGPA, setTargetCGPA] = useState<number>(9.0)\r\n    const [programCredits, setProgramCredits] = useState<number>(239) // User can adjust\r\n\r\n    // State for collapsible semesters\r\n    const [openSemesters, setOpenSemesters] = useState<Record<string, boolean>>({})\r\n\r\n    const supabase = createClient()\r\n\r\n    useEffect(() => {\r\n        const fetchCourses = async () => {\r\n            try {\r\n                const { data: { user } } = await supabase.auth.getUser()\r\n                if (!user) return\r\n\r\n                const { data, error } = await supabase\r\n                    .from('courses')\r\n                    .select('*')\r\n                    .eq('user_id', user.id)\r\n                    .order('created_at', { ascending: false })\r\n\r\n                if (error) throw error\r\n                setCourses(data || [])\r\n\r\n                // Auto-open the most recent semester\r\n                if (data && data.length > 0) {\r\n                    const recentSem = data[0].semester || 'Semester 1'\r\n                    setOpenSemesters({ [recentSem]: true })\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching courses:', error)\r\n                toast.error('Failed to load courses')\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        fetchCourses()\r\n    }, [supabase])\r\n\r\n    const calculateGPA = (courseList: Course[]): string => {\r\n        if (courseList.length === 0) return '0.00'\r\n\r\n        let totalPoints = 0\r\n        let totalCredits = 0\r\n\r\n        courseList.forEach(course => {\r\n            if (course.grade === 'P') return\r\n\r\n            const points = gradePoints[course.grade] ?? 0\r\n            totalPoints += points * course.credits\r\n            totalCredits += course.credits\r\n        })\r\n\r\n        return totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : '0.00'\r\n    }\r\n\r\n    // Group courses by semester\r\n    const coursesBySemester = useMemo(() => {\r\n        const groups: Record<string, Course[]> = {}\r\n        courses.forEach(c => {\r\n            const sem = c.semester || 'Unknown Semester'\r\n            if (!groups[sem]) groups[sem] = []\r\n            groups[sem].push(c)\r\n        })\r\n        return groups\r\n    }, [courses])\r\n\r\n    const sortedSemesters = Object.keys(coursesBySemester).sort()\r\n    // Ideally sort by time/number? String sort for now. \"Semester 1\", \"Semester 2\"... works ok.\r\n\r\n    const cgpa = calculateGPA(courses)\r\n    const totalCredits = courses.reduce((sum, course) => sum + course.credits, 0)\r\n\r\n    const addCourse = async () => {\r\n        if (!newCourse.name) return\r\n\r\n        try {\r\n            setIsSubmitting(true)\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (!user) {\r\n                toast.error('You must be logged in')\r\n                return\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('courses')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    name: newCourse.name,\r\n                    credits: newCourse.credits,\r\n                    grade: newCourse.grade,\r\n                    semester: newCourse.semester\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) throw error\r\n\r\n            setCourses([data, ...courses])\r\n            setNewCourse(prev => ({ ...prev, name: '' })) // Keep credits/grade/semester for speed\r\n            // Don't close form, allow rapid entry\r\n            toast.success('Course added')\r\n        } catch (error) {\r\n            console.error('Error adding course:', error)\r\n            toast.error('Failed to add course')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    const removeCourse = async (id: string) => {\r\n        try {\r\n            const { error } = await supabase.from('courses').delete().eq('id', id)\r\n            if (error) throw error\r\n            setCourses(courses.filter((c) => c.id !== id))\r\n            toast.success('Course removed')\r\n        } catch (error) {\r\n            toast.error('Failed to remove course')\r\n        }\r\n    }\r\n\r\n    const updateCourseSemester = async (id: string, newSemester: string) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('courses')\r\n                .update({ semester: newSemester })\r\n                .eq('id', id)\r\n\r\n            if (error) throw error\r\n\r\n            setCourses(courses.map(c =>\r\n                c.id === id ? { ...c, semester: newSemester } : c\r\n            ))\r\n            toast.success('Semester updated')\r\n        } catch (error) {\r\n            toast.error('Failed to update semester')\r\n        }\r\n    }\r\n\r\n    // Bulk rename all courses in a semester\r\n    const renameSemester = async (oldSemester: string, newSemester: string) => {\r\n        if (oldSemester === newSemester) return\r\n\r\n        try {\r\n            const coursesToUpdate = courses.filter(c => c.semester === oldSemester)\r\n            const courseIds = coursesToUpdate.map(c => c.id)\r\n\r\n            const { error } = await supabase\r\n                .from('courses')\r\n                .update({ semester: newSemester })\r\n                .in('id', courseIds)\r\n\r\n            if (error) throw error\r\n\r\n            setCourses(courses.map(c =>\r\n                c.semester === oldSemester ? { ...c, semester: newSemester } : c\r\n            ))\r\n\r\n            // Update open semesters state\r\n            setOpenSemesters(prev => {\r\n                const newState = { ...prev }\r\n                if (oldSemester in newState) {\r\n                    newState[newSemester] = newState[oldSemester]\r\n                    delete newState[oldSemester]\r\n                }\r\n                return newState\r\n            })\r\n\r\n            toast.success(`Renamed \"${oldSemester}\" to \"${newSemester}\"`)\r\n        } catch (error) {\r\n            toast.error('Failed to rename semester')\r\n        }\r\n    }\r\n\r\n    // Clear all courses\r\n    const clearAllCourses = async () => {\r\n        try {\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (!user) return\r\n\r\n            const { error } = await supabase\r\n                .from('courses')\r\n                .delete()\r\n                .eq('user_id', user.id)\r\n\r\n            if (error) throw error\r\n\r\n            setCourses([])\r\n            setOpenSemesters({})\r\n            toast.success('All courses cleared')\r\n        } catch (error) {\r\n            toast.error('Failed to clear courses')\r\n        }\r\n    }\r\n\r\n    // CGPA Future Calculator\r\n    const CREDITS_PER_SEMESTER = 24 // Approximate\r\n\r\n    // Calculate future CGPA scenarios\r\n    const cgpaAnalysis = useMemo(() => {\r\n        const currentCredits = totalCredits\r\n        const currentCGPA = parseFloat(cgpa) || 0\r\n        const remainingCredits = Math.max(0, programCredits - currentCredits)\r\n        const remainingSemesters = Math.ceil(remainingCredits / CREDITS_PER_SEMESTER)\r\n        const currentPoints = currentCGPA * currentCredits\r\n\r\n        // What if scenarios - if you get all X grade from now\r\n        const whatIf = (gradeGPA: number) => {\r\n            if (remainingCredits <= 0) return currentCGPA.toFixed(2)\r\n            const futurePoints = currentPoints + (gradeGPA * remainingCredits)\r\n            return (futurePoints / programCredits).toFixed(2)\r\n        }\r\n\r\n        // Calculate required GPA to reach target\r\n        const requiredForTarget = (targetCGPA: number) => {\r\n            if (remainingCredits <= 0) return { achievable: true, gpa: 0, alreadyDone: true }\r\n            const targetPoints = targetCGPA * programCredits\r\n            const neededPoints = targetPoints - currentPoints\r\n            const neededGPA = neededPoints / remainingCredits\r\n\r\n            if (neededGPA > 10) return { achievable: false, gpa: neededGPA }\r\n            if (neededGPA <= 0) return { achievable: true, gpa: 0, alreadyDone: true }\r\n            return { achievable: true, gpa: neededGPA }\r\n        }\r\n\r\n        // What grade combination to reach target\r\n        const gradeBreakdown = (targetCGPA: number) => {\r\n            const req = requiredForTarget(targetCGPA)\r\n            if (!req.achievable) return null\r\n            if (req.alreadyDone) return { message: \"Already on track! Just pass.\" }\r\n\r\n            const gpa = req.gpa\r\n            // Calculate mix of grades needed\r\n            if (gpa >= 9.5) return { allS: true, message: \"Need mostly S grades\" }\r\n            if (gpa >= 8.5) return { mix: \"S/A\", message: \"Mix of S and A grades\" }\r\n            if (gpa >= 7.5) return { mix: \"A/B\", message: \"Mix of A and B grades\" }\r\n            if (gpa >= 6.5) return { mix: \"B/C\", message: \"Mix of B and C grades\" }\r\n            return { mix: \"C/D\", message: \"C grades or better will do it\" }\r\n        }\r\n\r\n        return {\r\n            remainingCredits,\r\n            remainingSemesters,\r\n            maxPossible: whatIf(10),    // All S\r\n            ifAllA: whatIf(9),          // All A\r\n            ifAllB: whatIf(8),          // All B\r\n            requiredForTarget,\r\n            gradeBreakdown,\r\n        }\r\n    }, [cgpa, totalCredits, programCredits])\r\n\r\n    const getGPAColor = (gpa: number) => {\r\n        if (gpa >= 9.0) return 'text-purple-400'\r\n        if (gpa >= 8.0) return 'text-emerald-400'\r\n        if (gpa >= 7.0) return 'text-blue-400'\r\n        if (gpa >= 6.0) return 'text-amber-400'\r\n        if (gpa >= 5.0) return 'text-orange-400'\r\n        return 'text-rose-400'\r\n    }\r\n\r\n    const toggleSemester = (sem: string) => {\r\n        setOpenSemesters(prev => ({ ...prev, [sem]: !prev[sem] }))\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n                <Loader2 className=\"h-8 w-8 text-violet-500 animate-spin\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto space-y-8\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-white\">CGPA Calculator</h1>\r\n                    <p className=\"text-gray-400 mt-1\">Track your academic performance across semesters</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <ImageUploadExtractor\r\n                        type=\"grades\"\r\n                        title=\"Extract Grades (PDF Support)\"\r\n                        description=\"Upload your result slip or transcript.\"\r\n                        onExtract={async (data) => {\r\n                            if (data.courses && Array.isArray(data.courses)) {\r\n                                try {\r\n                                    const { data: { user } } = await supabase.auth.getUser()\r\n                                    if (!user) return\r\n\r\n                                    // Get existing course names for duplicate detection\r\n                                    const existingNames = new Set(courses.map(c => c.name.toLowerCase().trim()))\r\n\r\n                                    // Pre-process courses with default semester if missing\r\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                                    const allCourses = data.courses.map((c: any) => {\r\n                                        let grade = c.grade?.toUpperCase() || 'A'\r\n                                        if (grade === 'O') grade = 'S' // Normalize\r\n                                        if (grade === 'A+') grade = 'A' // Normalize\r\n\r\n                                        const validGrades = Object.keys(gradePoints)\r\n                                        if (!validGrades.includes(grade)) {\r\n                                            if (grade.includes('A')) grade = 'A'\r\n                                            else if (grade.includes('B')) grade = 'B'\r\n                                            else grade = 'A' // Default\r\n                                        }\r\n\r\n                                        return {\r\n                                            user_id: user.id,\r\n                                            name: c.name || 'Unknown Course',\r\n                                            credits: c.credits || 3,\r\n                                            grade: grade,\r\n                                            semester: c.semester || 'Imported'\r\n                                        }\r\n                                    })\r\n\r\n                                    // Filter out duplicates (silently skip)\r\n                                    const coursesToInsert = allCourses.filter(\r\n                                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                                        (c: any) => !existingNames.has(c.name.toLowerCase().trim())\r\n                                    )\r\n                                    const duplicatesSkipped = allCourses.length - coursesToInsert.length\r\n\r\n                                    if (coursesToInsert.length === 0) {\r\n                                        toast.info('All courses already exist, nothing to import')\r\n                                        return\r\n                                    }\r\n\r\n                                    const { data: inserted, error } = await supabase\r\n                                        .from('courses')\r\n                                        .insert(coursesToInsert)\r\n                                        .select()\r\n\r\n                                    if (error) throw error\r\n\r\n                                    if (inserted) {\r\n                                        setCourses(prev => [...inserted, ...prev])\r\n                                        const msg = duplicatesSkipped > 0\r\n                                            ? `Imported ${inserted.length} courses (${duplicatesSkipped} duplicates skipped)`\r\n                                            : `Imported ${inserted.length} courses`\r\n                                        toast.success(msg)\r\n                                    }\r\n                                } catch (e: unknown) {\r\n                                    const err = e instanceof Error ? e.message : String(e);\r\n                                    toast.error(`Import failed: ${err}`)\r\n                                }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        onClick={() => setShowAddForm(true)}\r\n                        className=\"gradient-primary text-white gap-2\"\r\n                    >\r\n                        <Plus className=\"h-4 w-4\" />\r\n                        Add Course\r\n                    </Button>\r\n                    {courses.length > 0 && (\r\n                        <AlertDialog>\r\n                            <AlertDialogTrigger asChild>\r\n                                <Button variant=\"outline\" className=\"gap-2 text-red-400 border-red-400/30 hover:bg-red-500/10\">\r\n                                    <Trash2 className=\"h-4 w-4\" />\r\n                                    Clear All\r\n                                </Button>\r\n                            </AlertDialogTrigger>\r\n                            <AlertDialogContent className=\"bg-card border-border\">\r\n                                <AlertDialogHeader>\r\n                                    <AlertDialogTitle>Clear All Courses</AlertDialogTitle>\r\n                                    <AlertDialogDescription>\r\n                                        Are you sure you want to delete ALL {courses.length} courses? This will reset your CGPA calculator completely.\r\n                                    </AlertDialogDescription>\r\n                                </AlertDialogHeader>\r\n                                <AlertDialogFooter>\r\n                                    <AlertDialogCancel className=\"border-border\">Cancel</AlertDialogCancel>\r\n                                    <AlertDialogAction\r\n                                        onClick={clearAllCourses}\r\n                                        className=\"bg-red-500 hover:bg-red-600 text-white\"\r\n                                    >\r\n                                        Delete All\r\n                                    </AlertDialogAction>\r\n                                </AlertDialogFooter>\r\n                            </AlertDialogContent>\r\n                        </AlertDialog>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Help Note */}\r\n            <div className=\"text-sm text-muted-foreground bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 flex items-start gap-2\">\r\n                <span className=\"text-blue-400\">üí°</span>\r\n                <span>\r\n                    <strong>Tip:</strong> When importing from grade history PDF, duplicates are auto-skipped. No need to clear existing courses!\r\n                </span>\r\n            </div>\r\n\r\n            {/* CGPA Card */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <Card className=\"glass-card border-white/[0.06] md:col-span-2\">\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-6\">\r\n                            <div className=\"p-4 rounded-2xl bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20\">\r\n                                <GraduationCap className=\"h-10 w-10 text-violet-400\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-sm text-gray-400 mb-1\">Cumulative GPA (CGPA)</p>\r\n                                <p className={cn(\"text-5xl font-bold\", getGPAColor(parseFloat(cgpa)))}>\r\n                                    {cgpa}\r\n                                </p>\r\n                                <p className=\"text-sm text-gray-500 mt-1\">out of 10.0</p>\r\n                            </div>\r\n                            <div className=\"ml-auto text-right\">\r\n                                <p className=\"text-2xl font-bold text-white\">{totalCredits}</p>\r\n                                <p className=\"text-sm text-gray-400\">Total Credits</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mt-6\">\r\n                            <div className=\"h-3 bg-white/5 rounded-full overflow-hidden\">\r\n                                <div\r\n                                    className=\"h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 rounded-full transition-all duration-500\"\r\n                                    style={{ width: `${(parseFloat(cgpa) / 10) * 100}%` }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"glass-card border-white/[0.06]\">\r\n                    <CardContent className=\"p-6 flex flex-col justify-center h-full\">\r\n                        <div className=\"text-center\">\r\n                            <BookOpen className=\"h-8 w-8 text-cyan-400 mx-auto mb-3\" />\r\n                            <p className=\"text-xl font-bold text-foreground\">{sortedSemesters.length}</p>\r\n                            <p className=\"text-sm text-muted-foreground\">Semesters</p>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* CGPA Future Planner */}\r\n            {totalCredits > 0 && cgpaAnalysis.remainingCredits > 0 && (\r\n                <Card className=\"glass-card border-purple-500/20 bg-gradient-to-r from-purple-500/5 to-pink-500/5\">\r\n                    <CardHeader className=\"pb-3\">\r\n                        <CardTitle className=\"text-lg text-foreground flex items-center gap-2 flex-wrap\">\r\n                            <TrendingUp className=\"h-5 w-5 text-purple-400\" />\r\n                            Your CGPA Future\r\n                            <span className=\"text-xs font-normal text-muted-foreground\">\r\n                                ({cgpaAnalysis.remainingCredits} of\r\n                                <Input\r\n                                    type=\"number\"\r\n                                    value={programCredits}\r\n                                    onChange={(e) => setProgramCredits(Math.max(totalCredits, parseInt(e.target.value) || 0))}\r\n                                    className=\"w-16 h-6 text-xs mx-1 px-2 bg-background border-border inline-block\"\r\n                                    min={totalCredits}\r\n                                />\r\n                                total credits left ‚Ä¢ ~{cgpaAnalysis.remainingSemesters} sems)\r\n                            </span>\r\n                        </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        {/* What-if Scenarios */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                            <div className=\"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3 text-center\">\r\n                                <p className=\"text-xs text-muted-foreground mb-1\">If you get all S grades</p>\r\n                                <p className=\"text-2xl font-bold text-purple-400\">{cgpaAnalysis.maxPossible}</p>\r\n                                <p className=\"text-xs text-muted-foreground\">Max possible</p>\r\n                            </div>\r\n                            <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-3 text-center\">\r\n                                <p className=\"text-xs text-muted-foreground mb-1\">If you get all A grades</p>\r\n                                <p className=\"text-2xl font-bold text-green-400\">{cgpaAnalysis.ifAllA}</p>\r\n                                <p className=\"text-xs text-muted-foreground\">Realistic target</p>\r\n                            </div>\r\n                            <div className=\"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 text-center\">\r\n                                <p className=\"text-xs text-muted-foreground mb-1\">If you get all B grades</p>\r\n                                <p className=\"text-2xl font-bold text-blue-400\">{cgpaAnalysis.ifAllB}</p>\r\n                                <p className=\"text-xs text-muted-foreground\">Safe estimate</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Target Input */}\r\n                        <div className=\"border-t border-border pt-4\">\r\n                            <div className=\"flex flex-wrap items-center gap-3\">\r\n                                <span className=\"text-muted-foreground\">I want to finish with</span>\r\n                                <Select\r\n                                    value={targetCGPA.toString()}\r\n                                    onValueChange={(v) => setTargetCGPA(parseFloat(v))}\r\n                                >\r\n                                    <SelectTrigger className=\"w-24 bg-background border-border\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent className=\"bg-popover border-border\">\r\n                                        {[7.0, 7.5, 8.0, 8.5, 9.0, 9.5, 10.0].map((v) => (\r\n                                            <SelectItem key={v} value={v.toString()}>{v.toFixed(1)} CGPA</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                <span className=\"text-muted-foreground\">‚Üí</span>\r\n                                {(() => {\r\n                                    const req = cgpaAnalysis.requiredForTarget(targetCGPA)\r\n                                    const breakdown = cgpaAnalysis.gradeBreakdown(targetCGPA)\r\n\r\n                                    if (!req.achievable) {\r\n                                        return (\r\n                                            <span className=\"text-red-400 font-medium\">\r\n                                                ‚ùå Not possible (would need {req.gpa.toFixed(1)}/10)\r\n                                            </span>\r\n                                        )\r\n                                    }\r\n                                    if (req.alreadyDone) {\r\n                                        return (\r\n                                            <span className=\"text-green-400 font-medium\">\r\n                                                ‚úÖ Already on track! Just pass your remaining courses.\r\n                                            </span>\r\n                                        )\r\n                                    }\r\n                                    return (\r\n                                        <span className=\"text-foreground\">\r\n                                            Need <strong className=\"text-purple-400\">{req.gpa.toFixed(1)}</strong> avg in remaining credits\r\n                                            {breakdown && <span className=\"text-muted-foreground ml-2\">({breakdown.message})</span>}\r\n                                        </span>\r\n                                    )\r\n                                })()}\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            )}\r\n\r\n            {/* Add Course Form */}\r\n            {showAddForm && (\r\n                <Card className=\"glass-card border-violet-500/30 bg-violet-500/5\">\r\n                    <CardHeader>\r\n                        <CardTitle className=\"text-lg text-white\">Add New Course</CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                            <div className=\"md:col-span-2\">\r\n                                <Label className=\"text-gray-400\">Course Name</Label>\r\n                                <Input\r\n                                    placeholder=\"e.g., Data Structures\"\r\n                                    value={newCourse.name}\r\n                                    onChange={(e) => setNewCourse({ ...newCourse, name: e.target.value })}\r\n                                    className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <Label className=\"text-gray-400\">Semester</Label>\r\n                                <Select\r\n                                    value={newCourse.semester}\r\n                                    onValueChange={(value) => setNewCourse({ ...newCourse, semester: value })}\r\n                                >\r\n                                    <SelectTrigger className=\"w-full bg-white/5 border-white/10 text-white mt-1\">\r\n                                        <SelectValue placeholder=\"Select semester\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent className=\"bg-gray-900 border-white/10\">\r\n                                        {[1, 2, 3, 4, 5, 6, 7, 8].map((n) => (\r\n                                            <SelectItem key={n} value={`Semester ${n}`} className=\"text-white hover:bg-white/10\">\r\n                                                Semester {n}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div>\r\n                                <Label className=\"text-gray-400\">Credits</Label>\r\n                                <Select\r\n                                    value={newCourse.credits.toString()}\r\n                                    onValueChange={(value) => setNewCourse({ ...newCourse, credits: parseInt(value) })}\r\n                                >\r\n                                    <SelectTrigger className=\"w-full bg-white/5 border-white/10 text-white mt-1\">\r\n                                        <SelectValue placeholder=\"Credits\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent className=\"bg-gray-900 border-white/10\">\r\n                                        {[1, 2, 3, 4, 5, 6].map((n) => (\r\n                                            <SelectItem key={n} value={n.toString()} className=\"text-white hover:bg-white/10\">\r\n                                                {n}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4\">\r\n                            <div>\r\n                                <Label className=\"text-gray-400\">Grade</Label>\r\n                                <Select\r\n                                    value={newCourse.grade}\r\n                                    onValueChange={(value) => setNewCourse({ ...newCourse, grade: value })}\r\n                                >\r\n                                    <SelectTrigger className=\"w-full bg-white/5 border-white/10 text-white mt-1\">\r\n                                        <SelectValue placeholder=\"Grade\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent className=\"bg-gray-900 border-white/10\">\r\n                                        {Object.keys(gradePoints).map((g) => (\r\n                                            <SelectItem key={g} value={g} className=\"text-white hover:bg-white/10\">\r\n                                                {g}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"md:col-span-3 flex items-end justify-end gap-2\">\r\n                                <Button variant=\"ghost\" onClick={() => setShowAddForm(false)} className=\"text-gray-400\">\r\n                                    Done\r\n                                </Button>\r\n                                <Button onClick={addCourse} className=\"gradient-primary text-white space-x-2\" disabled={isSubmitting}>\r\n                                    <Plus className=\"h-4 w-4\" />\r\n                                    <span>Add</span>\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            )}\r\n\r\n            {/* Semester Lists (SGPA) */}\r\n            <div className=\"space-y-6\">\r\n                {sortedSemesters.length === 0 && !showAddForm && (\r\n                    <div className=\"text-center py-12 text-gray-500\">\r\n                        <p>No grade history found. Add a course or upload a transcript!</p>\r\n                    </div>\r\n                )}\r\n\r\n                {sortedSemesters.map(sem => {\r\n                    const semCourses = coursesBySemester[sem]\r\n                    const sgpa = calculateGPA(semCourses)\r\n                    const isOpen = openSemesters[sem]\r\n\r\n                    return (\r\n                        <Collapsible\r\n                            key={sem}\r\n                            open={isOpen}\r\n                            onOpenChange={() => toggleSemester(sem)}\r\n                            className=\"bg-card/50 border border-border rounded-xl overflow-hidden\"\r\n                        >\r\n                            <div className=\"p-4 flex items-center justify-between bg-muted/30\">\r\n                                <CollapsibleTrigger className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\">\r\n                                    {isOpen ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronUp className=\"h-4 w-4\" />}\r\n                                    <h3 className=\"text-lg font-semibold text-foreground\">{sem}</h3>\r\n                                </CollapsibleTrigger>\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    {/* Rename semester dropdown */}\r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-7 w-7 text-muted-foreground hover:text-blue-400 hover:bg-blue-500/10\"\r\n                                            >\r\n                                                <Pencil className=\"h-3.5 w-3.5\" />\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent className=\"bg-popover border-border\">\r\n                                            <div className=\"px-2 py-1.5 text-xs text-muted-foreground\">Rename to:</div>\r\n                                            {[1, 2, 3, 4, 5, 6, 7, 8].map((n) => (\r\n                                                <DropdownMenuItem\r\n                                                    key={n}\r\n                                                    onClick={() => renameSemester(sem, `Semester ${n}`)}\r\n                                                    className={cn(\r\n                                                        \"cursor-pointer\",\r\n                                                        sem === `Semester ${n}` && \"bg-violet-500/20 text-violet-400\"\r\n                                                    )}\r\n                                                >\r\n                                                    Semester {n}\r\n                                                </DropdownMenuItem>\r\n                                            ))}\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                    <div className=\"text-right\">\r\n                                        <span className=\"text-xs text-muted-foreground uppercase tracking-wider\">SGPA</span>\r\n                                        <p className={cn(\"text-xl font-bold\", getGPAColor(parseFloat(sgpa)))}>\r\n                                            {sgpa}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <CollapsibleContent>\r\n                                <div className=\"space-y-1 p-2\">\r\n                                    {/* Header */}\r\n                                    <div className=\"grid grid-cols-12 gap-4 px-4 py-2 text-xs text-gray-500 uppercase rounded-t-lg bg-white/[0.01]\">\r\n                                        <div className=\"col-span-6\">Course</div>\r\n                                        <div className=\"col-span-2 text-center\">Credits</div>\r\n                                        <div className=\"col-span-2 text-center\">Grade</div>\r\n                                        <div className=\"col-span-2 text-right\"></div>\r\n                                    </div>\r\n\r\n                                    {semCourses.map((course) => (\r\n                                        <div\r\n                                            key={course.id}\r\n                                            className=\"grid grid-cols-12 gap-4 items-center px-4 py-3 rounded-lg hover:bg-white/[0.04] transition-colors group\"\r\n                                        >\r\n                                            <div className=\"col-span-6 font-medium text-white/90 truncate\">{course.name}</div>\r\n                                            <div className=\"col-span-2 text-center text-gray-400\">{course.credits}</div>\r\n                                            <div className={cn(\"col-span-2 text-center font-bold\", gradeColors[course.grade])}>\r\n                                                {course.grade}\r\n                                            </div>\r\n                                            <div className=\"col-span-2 text-right flex items-center justify-end gap-1\">\r\n                                                <DropdownMenu>\r\n                                                    <DropdownMenuTrigger asChild>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            className=\"h-7 w-7 text-muted-foreground hover:text-blue-400 hover:bg-blue-500/10 transition-all\"\r\n                                                        >\r\n                                                            <Pencil className=\"h-3.5 w-3.5\" />\r\n                                                        </Button>\r\n                                                    </DropdownMenuTrigger>\r\n                                                    <DropdownMenuContent className=\"bg-popover border-border\">\r\n                                                        {[1, 2, 3, 4, 5, 6, 7, 8].map((n) => (\r\n                                                            <DropdownMenuItem\r\n                                                                key={n}\r\n                                                                onClick={() => updateCourseSemester(course.id, `Semester ${n}`)}\r\n                                                                className={cn(\r\n                                                                    \"cursor-pointer\",\r\n                                                                    course.semester === `Semester ${n}` && \"bg-violet-500/20 text-violet-400\"\r\n                                                                )}\r\n                                                            >\r\n                                                                Semester {n}\r\n                                                            </DropdownMenuItem>\r\n                                                        ))}\r\n                                                    </DropdownMenuContent>\r\n                                                </DropdownMenu>\r\n                                                <AlertDialog>\r\n                                                    <AlertDialogTrigger asChild>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            className=\"h-7 w-7 text-muted-foreground hover:text-red-400 hover:bg-red-500/10 transition-all\"\r\n                                                        >\r\n                                                            <Trash2 className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                    </AlertDialogTrigger>\r\n                                                    <AlertDialogContent className=\"bg-card border-border\">\r\n                                                        <AlertDialogHeader>\r\n                                                            <AlertDialogTitle>Delete Course</AlertDialogTitle>\r\n                                                            <AlertDialogDescription>\r\n                                                                Are you sure you want to delete &quot;{course.name}&quot;? This action cannot be undone.\r\n                                                            </AlertDialogDescription>\r\n                                                        </AlertDialogHeader>\r\n                                                        <AlertDialogFooter>\r\n                                                            <AlertDialogCancel className=\"border-border\">Cancel</AlertDialogCancel>\r\n                                                            <AlertDialogAction\r\n                                                                onClick={() => removeCourse(course.id)}\r\n                                                                className=\"bg-red-500 hover:bg-red-600 text-white\"\r\n                                                            >\r\n                                                                Delete\r\n                                                            </AlertDialogAction>\r\n                                                        </AlertDialogFooter>\r\n                                                    </AlertDialogContent>\r\n                                                </AlertDialog>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </CollapsibleContent>\r\n                        </Collapsible>\r\n                    )\r\n                })}\r\n            </div>\r\n\r\n            {/* GPA Scale Reference */}\r\n            <Card className=\"glass-card border-white/[0.06]\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-sm text-gray-400\">GPA Scale Reference</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                        {Object.entries(gradePoints).map(([grade, points]) => (\r\n                            <div\r\n                                key={grade}\r\n                                className={cn(\r\n                                    \"px-3 py-1.5 rounded-lg text-sm border\",\r\n                                    gradeColors[grade] || \"text-gray-400 border-gray-500/30\",\r\n                                    grade === 'S' && \"bg-purple-500/10 border-purple-500/30\",\r\n                                    grade === 'A' && \"bg-emerald-500/10 border-emerald-500/30\",\r\n                                    grade === 'B' && \"bg-emerald-500/10 border-emerald-500/30\",\r\n                                    grade === 'C' && \"bg-blue-500/10 border-blue-500/30\",\r\n                                    grade === 'D' && \"bg-amber-500/10 border-amber-500/30\",\r\n                                    grade === 'E' && \"bg-orange-500/10 border-orange-500/30\",\r\n                                    grade === 'F' && \"bg-rose-500/10 border-rose-500/30\",\r\n                                    grade === 'P' && \"bg-gray-500/10 border-gray-500/30\",\r\n                                )}\r\n                            >\r\n                                <span className=\"font-semibold\">{grade}</span>\r\n                                <span className=\"ml-1 text-gray-400\">\r\n                                    {grade === 'P' ? '(Pass)' : `= ${points.toFixed(1)}`}\r\n                                </span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\notes\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\notes\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\notes\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\pomodoro\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\reminders\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createClient' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"createClient"},"fix":{"range":[61,113],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":24,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[658,690],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\reminders\\page.tsx:69:13\n  67 |                 datetime: new Date(r.datetime)\n  68 |             }))\n> 69 |             setReminders(parsed)\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  70 |         }\n  71 |     }, [])\n  72 |","line":69,"column":13,"nodeType":null,"endLine":69,"endColumn":25},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'triggerNotification'. Either include it or remove the dependency array.","line":99,"column":8,"nodeType":"ArrayExpression","endLine":99,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [triggerNotification]","fix":{"range":[3222,3224],"text":"[triggerNotification]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Bell, BellOff, Plus, Trash2, Clock, Calendar } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport { format, addMinutes, addHours, addDays, isPast } from 'date-fns'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface Reminder {\r\n    id: string\r\n    title: string\r\n    datetime: Date\r\n    type: 'task' | 'event' | 'custom'\r\n    notified: boolean\r\n}\r\n\r\nexport default function RemindersPage() {\r\n    const [reminders, setReminders] = useState<Reminder[]>([])\r\n    const [notificationPermission, setNotificationPermission] = useState<NotificationPermission>(\r\n        typeof window !== 'undefined' && 'Notification' in window ? Notification.permission : 'default'\r\n    )\r\n    const [dialogOpen, setDialogOpen] = useState(false)\r\n    const [newReminder, setNewReminder] = useState({\r\n        title: '',\r\n        quickTime: '15min',\r\n        customDate: '',\r\n        customTime: '',\r\n        type: 'custom' as const,\r\n    })\r\n\r\n    const triggerNotification = (reminder: Reminder) => {\r\n        if (notificationPermission === 'granted') {\r\n            new Notification('‚è∞ Reminder', {\r\n                body: reminder.title,\r\n                icon: '/icon.png',\r\n                tag: reminder.id,\r\n            })\r\n        }\r\n        toast.info(`Reminder: ${reminder.title}`)\r\n    }\r\n\r\n    // Check notification permission on mount\r\n    // Check notification permission on mount\r\n    useEffect(() => {\r\n        // Load reminders from localStorage\r\n        const saved = localStorage.getItem('reminders')\r\n        if (saved) {\r\n            const parsed = JSON.parse(saved).map((r: Reminder & { datetime: string }) => ({\r\n                ...r,\r\n                datetime: new Date(r.datetime)\r\n            }))\r\n            setReminders(parsed)\r\n        }\r\n    }, [])\r\n\r\n    // Save reminders to localStorage whenever they change\r\n    useEffect(() => {\r\n        localStorage.setItem('reminders', JSON.stringify(reminders))\r\n    }, [reminders])\r\n\r\n    // Check for due reminders every 30 seconds\r\n    useEffect(() => {\r\n        const checkReminders = () => {\r\n            setReminders(prev => {\r\n                let hasChanges = false\r\n                const next = prev.map(reminder => {\r\n                    if (!reminder.notified && isPast(reminder.datetime)) {\r\n                        triggerNotification(reminder)\r\n                        hasChanges = true\r\n                        return { ...reminder, notified: true }\r\n                    }\r\n                    return reminder\r\n                })\r\n                return hasChanges ? next : prev\r\n            })\r\n        }\r\n\r\n        const interval = setInterval(checkReminders, 30000)\r\n        checkReminders() // Check immediately\r\n\r\n        return () => clearInterval(interval)\r\n    }, [])\r\n\r\n    const requestPermission = async () => {\r\n        if (!('Notification' in window)) {\r\n            toast.error('This browser does not support notifications')\r\n            return\r\n        }\r\n\r\n        const permission = await Notification.requestPermission()\r\n        setNotificationPermission(permission)\r\n\r\n        if (permission === 'granted') {\r\n            toast.success('Notifications enabled!')\r\n            new Notification('StudentHub Reminders', {\r\n                body: 'You will now receive reminder notifications! üîî',\r\n                icon: '/icon.png'\r\n            })\r\n        } else if (permission === 'denied') {\r\n            toast.error('Notifications blocked. Enable them in browser settings.')\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const addReminder = () => {\r\n        if (!newReminder.title.trim()) {\r\n            toast.error('Please enter a reminder title')\r\n            return\r\n        }\r\n\r\n        let datetime: Date\r\n        const now = new Date()\r\n\r\n        switch (newReminder.quickTime) {\r\n            case '15min':\r\n                datetime = addMinutes(now, 15)\r\n                break\r\n            case '30min':\r\n                datetime = addMinutes(now, 30)\r\n                break\r\n            case '1hour':\r\n                datetime = addHours(now, 1)\r\n                break\r\n            case '3hours':\r\n                datetime = addHours(now, 3)\r\n                break\r\n            case 'tomorrow':\r\n                datetime = addDays(now, 1)\r\n                datetime.setHours(9, 0, 0, 0)\r\n                break\r\n            case 'custom':\r\n                if (!newReminder.customDate || !newReminder.customTime) {\r\n                    toast.error('Please select date and time')\r\n                    return\r\n                }\r\n                datetime = new Date(`${newReminder.customDate}T${newReminder.customTime}`)\r\n                break\r\n            default:\r\n                datetime = addMinutes(now, 15)\r\n        }\r\n\r\n        const reminder: Reminder = {\r\n            id: crypto.randomUUID(),\r\n            title: newReminder.title,\r\n            datetime,\r\n            type: newReminder.type,\r\n            notified: false,\r\n        }\r\n\r\n        setReminders(prev => [...prev, reminder].sort((a, b) => a.datetime.getTime() - b.datetime.getTime()))\r\n        setNewReminder({ title: '', quickTime: '15min', customDate: '', customTime: '', type: 'custom' })\r\n        setDialogOpen(false)\r\n        toast.success(`Reminder set for ${format(datetime, 'MMM d, h:mm a')}`)\r\n    }\r\n\r\n    const deleteReminder = (id: string) => {\r\n        setReminders(prev => prev.filter(r => r.id !== id))\r\n        toast.success('Reminder deleted')\r\n    }\r\n\r\n    const upcomingReminders = reminders.filter(r => !r.notified && !isPast(r.datetime))\r\n    const pastReminders = reminders.filter(r => r.notified || isPast(r.datetime))\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-3xl mx-auto\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n                        <Bell className=\"h-6 w-6 text-purple-400\" />\r\n                        Reminders\r\n                    </h1>\r\n                    <p className=\"text-gray-400 text-sm mt-1\">\r\n                        Set reminders for tasks, events, and more\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    {notificationPermission !== 'granted' && (\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={requestPermission}\r\n                            className=\"border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/10\"\r\n                        >\r\n                            <BellOff className=\"mr-2 h-4 w-4\" />\r\n                            Enable Notifications\r\n                        </Button>\r\n                    )}\r\n                    <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n                        <DialogTrigger asChild>\r\n                            <Button className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600\">\r\n                                <Plus className=\"mr-2 h-4 w-4\" />\r\n                                Add Reminder\r\n                            </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent className=\"bg-gray-900 border-white/10\">\r\n                            <DialogHeader>\r\n                                <DialogTitle className=\"text-white\">New Reminder</DialogTitle>\r\n                            </DialogHeader>\r\n                            <div className=\"space-y-4\">\r\n                                <Input\r\n                                    placeholder=\"What do you want to remember?\"\r\n                                    value={newReminder.title}\r\n                                    onChange={(e) => setNewReminder(prev => ({ ...prev, title: e.target.value }))}\r\n                                    className=\"bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\r\n                                />\r\n\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-sm text-gray-400\">When?</label>\r\n                                    <Select\r\n                                        value={newReminder.quickTime}\r\n                                        onValueChange={(v) => setNewReminder(prev => ({ ...prev, quickTime: v }))}\r\n                                    >\r\n                                        <SelectTrigger className=\"bg-white/5 border-white/10 text-white\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent className=\"bg-gray-900 border-white/10\">\r\n                                            <SelectItem value=\"15min\">In 15 minutes</SelectItem>\r\n                                            <SelectItem value=\"30min\">In 30 minutes</SelectItem>\r\n                                            <SelectItem value=\"1hour\">In 1 hour</SelectItem>\r\n                                            <SelectItem value=\"3hours\">In 3 hours</SelectItem>\r\n                                            <SelectItem value=\"tomorrow\">Tomorrow at 9 AM</SelectItem>\r\n                                            <SelectItem value=\"custom\">Custom date/time</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n\r\n                                {newReminder.quickTime === 'custom' && (\r\n                                    <div className=\"grid grid-cols-2 gap-2\">\r\n                                        <Input\r\n                                            type=\"date\"\r\n                                            value={newReminder.customDate}\r\n                                            onChange={(e) => setNewReminder(prev => ({ ...prev, customDate: e.target.value }))}\r\n                                            className=\"bg-white/5 border-white/10 text-white\"\r\n                                        />\r\n                                        <Input\r\n                                            type=\"time\"\r\n                                            value={newReminder.customTime}\r\n                                            onChange={(e) => setNewReminder(prev => ({ ...prev, customTime: e.target.value }))}\r\n                                            className=\"bg-white/5 border-white/10 text-white\"\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n\r\n                                <Button\r\n                                    onClick={addReminder}\r\n                                    className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500\"\r\n                                >\r\n                                    Set Reminder\r\n                                </Button>\r\n                            </div>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Notification Permission Alert */}\r\n            {notificationPermission === 'default' && (\r\n                <div className=\"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/30 flex items-center gap-3\">\r\n                    <BellOff className=\"h-5 w-5 text-yellow-400 flex-shrink-0\" />\r\n                    <div className=\"flex-1\">\r\n                        <p className=\"text-yellow-200 text-sm\">\r\n                            Enable browser notifications to get alerted when reminders are due.\r\n                        </p>\r\n                    </div>\r\n                    <Button\r\n                        size=\"sm\"\r\n                        onClick={requestPermission}\r\n                        className=\"bg-yellow-500 hover:bg-yellow-600 text-black\"\r\n                    >\r\n                        Enable\r\n                    </Button>\r\n                </div>\r\n            )}\r\n\r\n            {/* Upcoming Reminders */}\r\n            <div className=\"space-y-3\">\r\n                <h2 className=\"text-sm font-semibold text-gray-400 uppercase tracking-wider\">\r\n                    Upcoming ({upcomingReminders.length})\r\n                </h2>\r\n                {upcomingReminders.length === 0 ? (\r\n                    <div className=\"text-center py-8 rounded-lg bg-white/[0.02] border border-white/5\">\r\n                        <Clock className=\"h-12 w-12 text-gray-600 mx-auto mb-3\" />\r\n                        <p className=\"text-gray-400\">No upcoming reminders</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-2\">\r\n                        {upcomingReminders.map(reminder => (\r\n                            <div\r\n                                key={reminder.id}\r\n                                className=\"flex items-center gap-3 p-4 rounded-lg bg-white/[0.03] border border-white/10 hover:border-purple-500/30 transition-colors group\"\r\n                            >\r\n                                <div className=\"p-2 rounded-full bg-purple-500/10\">\r\n                                    <Bell className=\"h-4 w-4 text-purple-400\" />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <p className=\"text-white font-medium\">{reminder.title}</p>\r\n                                    <p className=\"text-sm text-gray-400 flex items-center gap-1\">\r\n                                        <Calendar className=\"h-3 w-3\" />\r\n                                        {format(reminder.datetime, 'EEE, MMM d')} at {format(reminder.datetime, 'h:mm a')}\r\n                                    </p>\r\n                                </div>\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8 text-gray-400 hover:text-red-400 hover:bg-red-500/10 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                    onClick={() => deleteReminder(reminder.id)}\r\n                                >\r\n                                    <Trash2 className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Past Reminders */}\r\n            {pastReminders.length > 0 && (\r\n                <div className=\"space-y-3\">\r\n                    <h2 className=\"text-sm font-semibold text-gray-400 uppercase tracking-wider\">\r\n                        Completed ({pastReminders.length})\r\n                    </h2>\r\n                    <div className=\"space-y-2 opacity-60\">\r\n                        {pastReminders.slice(0, 5).map(reminder => (\r\n                            <div\r\n                                key={reminder.id}\r\n                                className=\"flex items-center gap-3 p-3 rounded-lg bg-white/[0.02] border border-white/5 group\"\r\n                            >\r\n                                <div className=\"p-1.5 rounded-full bg-gray-500/10\">\r\n                                    <Bell className=\"h-3 w-3 text-gray-500\" />\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <p className=\"text-gray-400 text-sm line-through\">{reminder.title}</p>\r\n                                    <p className=\"text-xs text-gray-500\">\r\n                                        {format(reminder.datetime, 'MMM d, h:mm a')}\r\n                                    </p>\r\n                                </div>\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-6 w-6 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100\"\r\n                                    onClick={() => deleteReminder(reminder.id)}\r\n                                >\r\n                                    <Trash2 className=\"h-3 w-3\" />\r\n                                </Button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    {pastReminders.length > 5 && (\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => setReminders(prev => prev.filter(r => !r.notified && !isPast(r.datetime)))}\r\n                            className=\"text-gray-500 hover:text-red-400\"\r\n                        >\r\n                            Clear all completed\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\resources\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MoreVertical"},"fix":{"range":[422,441],"text":""},"desc":"Remove unused variable \"MoreVertical\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":17,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Download"},"fix":{"range":[441,456],"text":""},"desc":"Remove unused variable \"Download\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":19,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[475,488],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'courses' is assigned a value but never used.","line":139,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":139,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n    Plus,\r\n    Search,\r\n    FileText,\r\n    Link as LinkIcon,\r\n    Image as ImageIcon,\r\n    Video,\r\n    MoreVertical,\r\n    Download,\r\n    ExternalLink,\r\n    Filter,\r\n    FolderOpen,\r\n    Loader2\r\n} from 'lucide-react'\r\nimport { cn } from '@/lib/utils'\r\nimport { toast } from 'sonner'\r\n\r\ninterface Resource {\r\n    id: string\r\n    title: string\r\n    type: 'pdf' | 'link' | 'video' | 'image' | 'other'\r\n    url: string\r\n    course: string\r\n    size: string\r\n    created_at: string\r\n}\r\n\r\nconst typeIcons = {\r\n    pdf: FileText,\r\n    link: LinkIcon,\r\n    image: ImageIcon,\r\n    video: Video,\r\n    other: FileText,\r\n}\r\n\r\nconst typeColors = {\r\n    pdf: 'text-rose-400 bg-rose-500/10 border-rose-500/30',\r\n    link: 'text-blue-400 bg-blue-500/10 border-blue-500/30',\r\n    image: 'text-purple-400 bg-purple-500/10 border-purple-500/30',\r\n    video: 'text-emerald-400 bg-emerald-500/10 border-emerald-500/30',\r\n    other: 'text-gray-400 bg-gray-500/10 border-gray-500/30',\r\n}\r\n\r\nexport default function ResourcesPage() {\r\n    const [resources, setResources] = useState<Resource[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [searchQuery, setSearchQuery] = useState('')\r\n    const [selectedType, setSelectedType] = useState<string | null>(null)\r\n\r\n    // Add Form State\r\n    const [showAddForm, setShowAddForm] = useState(false)\r\n    const [newResource, setNewResource] = useState<Partial<Resource>>({\r\n        type: 'link'\r\n    })\r\n    const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n    const supabase = createClient()\r\n\r\n    useEffect(() => {\r\n        const fetchResources = async () => {\r\n            try {\r\n                const { data: { user } } = await supabase.auth.getUser()\r\n                if (!user) return\r\n\r\n                const { data, error } = await supabase\r\n                    .from('resources')\r\n                    .select('*')\r\n                    .eq('user_id', user.id)\r\n                    .order('created_at', { ascending: false })\r\n\r\n                if (error) throw error\r\n                setResources(data || [])\r\n            } catch (error) {\r\n                console.error('Error fetching resources:', error)\r\n                toast.error('Failed to load resources')\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        fetchResources()\r\n    }, [supabase])\r\n\r\n    const addResource = async () => {\r\n        if (!newResource.title || !newResource.url || !newResource.type) {\r\n            toast.error('Please fill in title and URL')\r\n            return\r\n        }\r\n\r\n        try {\r\n            setIsSubmitting(true)\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n            if (!user) {\r\n                toast.error('You must be logged in')\r\n                return\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('resources')\r\n                .insert({\r\n                    user_id: user.id,\r\n                    title: newResource.title,\r\n                    type: newResource.type,\r\n                    url: newResource.url,\r\n                    course: newResource.course || 'General',\r\n                    size: newResource.size || '' // Optional\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) throw error\r\n\r\n            setResources([data, ...resources])\r\n            setNewResource({ type: 'link' })\r\n            setShowAddForm(false)\r\n            toast.success('Resource added successfully')\r\n        } catch (error) {\r\n            console.error('Error adding resource:', error)\r\n            toast.error('Failed to add resource')\r\n        } finally {\r\n            setIsSubmitting(false)\r\n        }\r\n    }\r\n\r\n    const filteredResources = resources.filter(resource => {\r\n        const matchesSearch = resource.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            resource.course.toLowerCase().includes(searchQuery.toLowerCase())\r\n        const matchesType = selectedType ? resource.type === selectedType : true\r\n        return matchesSearch && matchesType\r\n    })\r\n\r\n    const courses = Array.from(new Set(resources.map(r => r.course)))\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n                <Loader2 className=\"h-8 w-8 text-violet-500 animate-spin\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-white\">Resources</h1>\r\n                    <p className=\"text-gray-400 mt-1\">Organize your study materials, links, and documents</p>\r\n                </div>\r\n                <Button\r\n                    onClick={() => setShowAddForm(true)}\r\n                    className=\"gradient-primary text-white gap-2\"\r\n                >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                    Add Resource\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex flex-col md:flex-row gap-4 items-center\">\r\n                <div className=\"relative flex-1 w-full\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n                    <Input\r\n                        placeholder=\"Search resources...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className=\"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500\"\r\n                    />\r\n                </div>\r\n                <div className=\"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0\">\r\n                    <FilterButton\r\n                        label=\"All\"\r\n                        active={selectedType === null}\r\n                        onClick={() => setSelectedType(null)}\r\n                    />\r\n                    <FilterButton\r\n                        label=\"PDFs\"\r\n                        active={selectedType === 'pdf'}\r\n                        onClick={() => setSelectedType('pdf')}\r\n                        icon={FileText}\r\n                    />\r\n                    <FilterButton\r\n                        label=\"Links\"\r\n                        active={selectedType === 'link'}\r\n                        onClick={() => setSelectedType('link')}\r\n                        icon={LinkIcon}\r\n                    />\r\n                    <FilterButton\r\n                        label=\"Images\"\r\n                        active={selectedType === 'image'}\r\n                        onClick={() => setSelectedType('image')}\r\n                        icon={ImageIcon}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Add Resource Form */}\r\n            {showAddForm && (\r\n                <Card className=\"glass-card border-violet-500/30 bg-violet-500/5\">\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <Label className=\"text-gray-400\">Title</Label>\r\n                                    <Input\r\n                                        placeholder=\"e.g., Calculus cheatsheet\"\r\n                                        value={newResource.title || ''}\r\n                                        onChange={(e) => setNewResource({ ...newResource, title: e.target.value })}\r\n                                        className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <Label className=\"text-gray-400\">Type</Label>\r\n                                    <select\r\n                                        value={newResource.type}\r\n                                        onChange={(e) => setNewResource({ ...newResource, type: e.target.value as Resource['type'] })}\r\n                                        className=\"w-full h-10 px-3 rounded-md bg-white/5 border border-white/10 text-white mt-1\"\r\n                                    >\r\n                                        <option value=\"link\" className=\"bg-gray-900\">Link</option>\r\n                                        <option value=\"pdf\" className=\"bg-gray-900\">PDF</option>\r\n                                        <option value=\"video\" className=\"bg-gray-900\">Video</option>\r\n                                        <option value=\"image\" className=\"bg-gray-900\">Image</option>\r\n                                        <option value=\"other\" className=\"bg-gray-900\">Other</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <Label className=\"text-gray-400\">URL / Link</Label>\r\n                                <Input\r\n                                    placeholder=\"https://...\"\r\n                                    value={newResource.url || ''}\r\n                                    onChange={(e) => setNewResource({ ...newResource, url: e.target.value })}\r\n                                    className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <Label className=\"text-gray-400\">Course (Optional)</Label>\r\n                                    <Input\r\n                                        placeholder=\"e.g., Math 101\"\r\n                                        value={newResource.course || ''}\r\n                                        onChange={(e) => setNewResource({ ...newResource, course: e.target.value })}\r\n                                        className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <Label className=\"text-gray-400\">Size (Optional)</Label>\r\n                                    <Input\r\n                                        placeholder=\"e.g., 2 MB\"\r\n                                        value={newResource.size || ''}\r\n                                        onChange={(e) => setNewResource({ ...newResource, size: e.target.value })}\r\n                                        className=\"bg-white/5 border-white/10 text-white mt-1\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-2 pt-2\">\r\n                                <Button onClick={addResource} className=\"gradient-primary text-white\" disabled={isSubmitting}>\r\n                                    {isSubmitting ? 'Adding...' : 'Add Resource'}\r\n                                </Button>\r\n                                <Button variant=\"ghost\" onClick={() => setShowAddForm(false)} className=\"text-gray-400\" disabled={isSubmitting}>\r\n                                    Cancel\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            )}\r\n\r\n            {/* Resources Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {filteredResources.map((resource) => (\r\n                    <ResourceCard key={resource.id} resource={resource} />\r\n                ))}\r\n            </div>\r\n\r\n            {filteredResources.length === 0 && !showAddForm && (\r\n                <div className=\"text-center py-12\">\r\n                    <FolderOpen className=\"h-12 w-12 text-gray-600 mx-auto mb-3\" />\r\n                    <p className=\"text-gray-400\">No resources found</p>\r\n                    <Button\r\n                        variant=\"link\"\r\n                        onClick={() => setShowAddForm(true)}\r\n                        className=\"text-violet-400 mt-2\"\r\n                    >\r\n                        Add your first resource\r\n                    </Button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ResourceCard({ resource }: { resource: Resource }) {\r\n    const Icon = typeIcons[resource.type] || FileText\r\n    const colorClass = typeColors[resource.type] || typeColors.other\r\n\r\n    return (\r\n        <Card className=\"glass-card border-white/[0.06] hover:border-white/[0.12] transition-colors group\">\r\n            <CardContent className=\"p-4\">\r\n                <div className=\"flex items-start gap-4\">\r\n                    <div className={cn(\"p-2.5 rounded-xl shrink-0\", colorClass)}>\r\n                        <Icon className=\"h-5 w-5\" />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                        <h3 className=\"font-medium text-white truncate\">{resource.title}</h3>\r\n                        <div className=\"flex items-center gap-2 mt-1\">\r\n                            <span className=\"text-xs px-2 py-0.5 rounded-full bg-white/5 text-gray-400 border border-white/10\">\r\n                                {resource.course}\r\n                            </span>\r\n                            <span className=\"text-xs text-gray-500\">‚Ä¢</span>\r\n                            <span className=\"text-xs text-gray-500\">{new Date(resource.created_at).toLocaleDateString()}</span>\r\n                            {resource.size && (\r\n                                <>\r\n                                    <span className=\"text-xs text-gray-500\">‚Ä¢</span>\r\n                                    <span className=\"text-xs text-gray-500\">{resource.size}</span>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"shrink-0 flex gap-1\">\r\n                        <Button asChild variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-gray-400 hover:text-white\">\r\n                            <a href={resource.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                <ExternalLink className=\"h-4 w-4\" />\r\n                            </a>\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n\r\nfunction FilterButton({\r\n    label,\r\n    active,\r\n    onClick,\r\n    icon: Icon\r\n}: {\r\n    label: string,\r\n    active: boolean,\r\n    onClick: () => void,\r\n    icon?: React.ComponentType<{ className?: string }>\r\n}) {\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            className={cn(\r\n                \"px-4 py-2 rounded-xl text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap\",\r\n                active\r\n                    ? \"bg-white text-black shadow-lg shadow-white/10\"\r\n                    : \"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white\"\r\n            )}\r\n        >\r\n            {Icon && <Icon className=\"h-4 w-4\" />}\r\n            {label}\r\n        </button>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":25,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":63,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Check"},"fix":{"range":[747,754],"text":""},"desc":"Remove unused variable \"Check\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Camera' is defined but never used.","line":25,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":71,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Camera"},"fix":{"range":[754,762],"text":""},"desc":"Remove unused variable \"Camera\"."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\settings\\page.tsx:119:9\n  117 |\n  118 |     useEffect(() => {\n> 119 |         loadProfile()\n      |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  120 |     }, [])\n  121 |\n  122 |","line":119,"column":9,"nodeType":null,"endLine":119,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadProfile'. Either include it or remove the dependency array.","line":120,"column":8,"nodeType":"ArrayExpression","endLine":120,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadProfile]","fix":{"range":[4096,4098],"text":"[loadProfile]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":382,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":382,"endColumn":47}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useSearchParams } from 'next/navigation'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Switch } from '@/components/ui/switch'\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\r\nimport { Settings, User, Bell, Palette, Shield, Loader2, Check, Camera, Link2, Unlink } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport { useTheme } from 'next-themes'\r\n\r\ninterface UserProfile {\r\n    full_name: string | null\r\n    avatar_url: string | null\r\n    email: string\r\n    preferences: {\r\n        theme: 'light' | 'dark' | 'system'\r\n        notifications_enabled: boolean\r\n        daily_motivation: boolean\r\n    }\r\n}\r\n\r\nexport default function SettingsPage() {\r\n    const [loading, setLoading] = useState(true)\r\n    const [saving, setSaving] = useState(false)\r\n    const [profile, setProfile] = useState<UserProfile | null>(null)\r\n    const [googleConnected, setGoogleConnected] = useState(false)\r\n    const [connectingGoogle, setConnectingGoogle] = useState(false)\r\n    const supabase = createClient()\r\n    const { theme, setTheme } = useTheme()\r\n    const searchParams = useSearchParams()\r\n\r\n    // Check for Google connection status from URL params\r\n    useEffect(() => {\r\n        const googleConnectedParam = searchParams.get('google_connected')\r\n        const googleError = searchParams.get('google_error')\r\n\r\n        if (googleConnectedParam === 'true') {\r\n            toast.success('Google account connected!')\r\n            // Delay state update to avoid sync render warning\r\n            setTimeout(() => setGoogleConnected(true), 0)\r\n        } else if (googleError) {\r\n            toast.error(`Google connection failed: ${googleError}`)\r\n        }\r\n    }, [searchParams])\r\n\r\n    const loadProfile = async () => {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return\r\n\r\n        const { data: initialData, error } = await supabase\r\n            .from('profiles')\r\n            .select('*')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        let data = initialData\r\n\r\n        // If profile doesn't exist, create it\r\n        if (error && error.code === 'PGRST116') {\r\n            const { data: newProfile, error: insertError } = await supabase\r\n                .from('profiles')\r\n                .insert({\r\n                    id: user.id,\r\n                    email: user.email || '',\r\n                    full_name: user.user_metadata?.full_name || user.user_metadata?.name || null,\r\n                    avatar_url: user.user_metadata?.avatar_url || null,\r\n                    preferences: {\r\n                        theme: 'dark',\r\n                        notifications_enabled: true,\r\n                        daily_motivation: true,\r\n                    },\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (insertError) {\r\n                console.error('Failed to create profile:', insertError)\r\n                toast.error('Failed to create profile')\r\n            } else {\r\n                data = newProfile\r\n                toast.success('Profile created!')\r\n            }\r\n        }\r\n\r\n        if (data) {\r\n            setProfile({\r\n                full_name: data.full_name,\r\n                avatar_url: data.avatar_url,\r\n                email: data.email,\r\n                preferences: data.preferences || {\r\n                    theme: 'dark',\r\n                    notifications_enabled: true,\r\n                    daily_motivation: true,\r\n                },\r\n            })\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadProfile()\r\n    }, [])\r\n\r\n\r\n\r\n    const updateProfile = async (updates: Partial<UserProfile>) => {\r\n        setSaving(true)\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user) return\r\n\r\n        const { error } = await supabase\r\n            .from('profiles')\r\n            .update({\r\n                full_name: updates.full_name ?? profile?.full_name,\r\n                preferences: updates.preferences ?? profile?.preferences,\r\n                updated_at: new Date().toISOString(),\r\n            })\r\n            .eq('id', user.id)\r\n\r\n        if (error) {\r\n            toast.error('Failed to update profile')\r\n        } else {\r\n            setProfile(prev => prev ? { ...prev, ...updates } : null)\r\n            toast.success('Settings saved')\r\n        }\r\n        setSaving(false)\r\n    }\r\n\r\n    const updatePreference = (key: keyof UserProfile['preferences'], value: boolean | string) => {\r\n        if (!profile) return\r\n        const newPreferences = { ...profile.preferences, [key]: value }\r\n        setProfile({ ...profile, preferences: newPreferences })\r\n        updateProfile({ preferences: newPreferences })\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-purple-400\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-3xl mx-auto\">\r\n            {/* Header */}\r\n            <div>\r\n                <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-2\">\r\n                    <Settings className=\"h-6 w-6 text-purple-500\" />\r\n                    Settings\r\n                </h1>\r\n                <p className=\"text-muted-foreground text-sm mt-1\">\r\n                    Manage your account and preferences\r\n                </p>\r\n            </div>\r\n\r\n            {/* Profile Section */}\r\n            <Card className=\"bg-card border-border\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-foreground flex items-center gap-2\">\r\n                        <User className=\"h-5 w-5 text-purple-500\" />\r\n                        Profile\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-muted-foreground\">\r\n                        Your personal information\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    {/* Avatar */}\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Avatar className=\"h-20 w-20\">\r\n                            <AvatarImage src={profile?.avatar_url || ''} />\r\n                            <AvatarFallback className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-2xl\">\r\n                                {profile?.full_name?.charAt(0) || profile?.email.charAt(0).toUpperCase()}\r\n                            </AvatarFallback>\r\n                        </Avatar>\r\n                        <div>\r\n                            <p className=\"text-foreground font-medium\">{profile?.full_name || 'No name set'}</p>\r\n                            <p className=\"text-muted-foreground text-sm\">{profile?.email}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Name Input */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label className=\"text-muted-foreground\">Full Name</Label>\r\n                        <Input\r\n                            value={profile?.full_name || ''}\r\n                            onChange={(e) => setProfile(prev => prev ? { ...prev, full_name: e.target.value } : null)}\r\n                            onBlur={() => updateProfile({ full_name: profile?.full_name })}\r\n                            className=\"bg-input border-border text-foreground\"\r\n                            placeholder=\"Enter your name\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Email (read-only) */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label className=\"text-muted-foreground\">Email</Label>\r\n                        <Input\r\n                            value={profile?.email || ''}\r\n                            disabled\r\n                            className=\"bg-input border-border text-muted-foreground\"\r\n                        />\r\n                        <p className=\"text-xs text-muted-foreground\">Email cannot be changed</p>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Appearance Section */}\r\n            <Card className=\"bg-card border-border\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-foreground flex items-center gap-2\">\r\n                        <Palette className=\"h-5 w-5 text-purple-500\" />\r\n                        Appearance\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-muted-foreground\">\r\n                        Customize the look and feel\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-foreground font-medium\">Theme</p>\r\n                            <p className=\"text-muted-foreground text-sm\">Choose your preferred theme</p>\r\n                        </div>\r\n                        <Select\r\n                            value={theme || 'dark'}\r\n                            onValueChange={(v) => {\r\n                                setTheme(v)\r\n                                updatePreference('theme', v)\r\n                            }}\r\n                        >\r\n                            <SelectTrigger className=\"w-32 bg-input border-border text-foreground\">\r\n                                <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent className=\"bg-popover border-border\">\r\n                                <SelectItem value=\"dark\">Dark</SelectItem>\r\n                                <SelectItem value=\"light\">Light</SelectItem>\r\n                                <SelectItem value=\"system\">System</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Notifications Section */}\r\n            <Card className=\"bg-white/[0.02] border-white/10\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-white flex items-center gap-2\">\r\n                        <Bell className=\"h-5 w-5 text-purple-400\" />\r\n                        Notifications\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-gray-400\">\r\n                        Manage notification preferences\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white font-medium\">Push Notifications</p>\r\n                            <p className=\"text-gray-400 text-sm\">Receive reminder notifications</p>\r\n                        </div>\r\n                        <Switch\r\n                            checked={profile?.preferences.notifications_enabled ?? true}\r\n                            onCheckedChange={(v) => updatePreference('notifications_enabled', v)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white font-medium\">Daily Motivation</p>\r\n                            <p className=\"text-gray-400 text-sm\">Show motivational quotes on dashboard</p>\r\n                        </div>\r\n                        <Switch\r\n                            checked={profile?.preferences.daily_motivation ?? true}\r\n                            onCheckedChange={(v) => updatePreference('daily_motivation', v)}\r\n                        />\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Security Section */}\r\n            <Card className=\"bg-white/[0.02] border-white/10\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-white flex items-center gap-2\">\r\n                        <Shield className=\"h-5 w-5 text-purple-400\" />\r\n                        Security\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-gray-400\">\r\n                        Account security options\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        className=\"w-full border-white/10 text-white hover:bg-white/5\"\r\n                        onClick={async () => {\r\n                            const { error } = await supabase.auth.resetPasswordForEmail(profile?.email || '')\r\n                            if (error) {\r\n                                toast.error('Failed to send reset email')\r\n                            } else {\r\n                                toast.success('Password reset email sent!')\r\n                            }\r\n                        }}\r\n                    >\r\n                        Send Password Reset Email\r\n                    </Button>\r\n                    <p className=\"text-xs text-gray-500 text-center\">\r\n                        We&apos;ll send a link to reset your password\r\n                    </p>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Google Integrations */}\r\n            <Card className=\"bg-white/[0.02] border-white/10\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-white flex items-center gap-2\">\r\n                        <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\r\n                            <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\r\n                            <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\r\n                            <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\r\n                            <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\r\n                        </svg>\r\n                        Google Integrations\r\n                    </CardTitle>\r\n                    <CardDescription className=\"text-gray-400\">\r\n                        Connect Google to sync Calendar, Tasks, and more\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white font-medium\">Google Account</p>\r\n                            <p className=\"text-gray-400 text-sm\">\r\n                                {googleConnected ? 'Connected - Sync enabled' : 'Connect to sync Calendar & Tasks'}\r\n                            </p>\r\n                        </div>\r\n                        {googleConnected ? (\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                className=\"border-red-500/30 text-red-400 hover:bg-red-500/10\"\r\n                                onClick={async () => {\r\n                                    const { data: { user } } = await supabase.auth.getUser()\r\n                                    if (!user) return\r\n                                    await supabase\r\n                                        .from('profiles')\r\n                                        .update({ google_tokens: null, google_connected: false })\r\n                                        .eq('id', user.id)\r\n                                    setGoogleConnected(false)\r\n                                    toast.success('Google account disconnected')\r\n                                }}\r\n                            >\r\n                                <Unlink className=\"h-4 w-4 mr-2\" />\r\n                                Disconnect\r\n                            </Button>\r\n                        ) : (\r\n                            <Button\r\n                                className=\"bg-white text-gray-800 hover:bg-gray-100\"\r\n                                disabled={connectingGoogle}\r\n                                onClick={async () => {\r\n                                    setConnectingGoogle(true)\r\n                                    try {\r\n                                        const res = await fetch('/api/auth/google')\r\n                                        const { authUrl } = await res.json()\r\n                                        window.location.href = authUrl\r\n                                    } catch (e) {\r\n                                        toast.error('Failed to start Google connection')\r\n                                        setConnectingGoogle(false)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                {connectingGoogle ? (\r\n                                    <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\r\n                                ) : (\r\n                                    <Link2 className=\"h-4 w-4 mr-2\" />\r\n                                )}\r\n                                Connect Google\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                    {googleConnected && (\r\n                        <div className=\"text-xs text-gray-500 bg-white/5 rounded-lg p-3\">\r\n                            <p>‚úì Calendar events will sync with your timetable</p>\r\n                            <p>‚úì Tasks will sync with Google Tasks</p>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* PWA Install Prompt */}\r\n            <Card className=\"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/30\">\r\n                <CardContent className=\"py-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white font-medium\">üì± Install App</p>\r\n                            <p className=\"text-gray-400 text-sm\">Add StudentHub to your home screen for quick access</p>\r\n                        </div>\r\n                        <Button\r\n                            size=\"sm\"\r\n                            className=\"bg-gradient-to-r from-purple-500 to-pink-500\"\r\n                            onClick={() => {\r\n                                toast.info('Look for the \"Install\" or \"Add to Home Screen\" option in your browser menu!')\r\n                            }}\r\n                        >\r\n                            How to Install\r\n                        </Button>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Save indicator */}\r\n            {saving && (\r\n                <div className=\"fixed bottom-6 right-6 bg-purple-500 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2\">\r\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                    Saving...\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\tasks\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\tasks\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\dashboard\\timetable\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\app\\signup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ai\\ImageUploadExtractor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImageIcon' is defined but never used.","line":6,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":58,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ImageIcon"},"fix":{"range":[250,270],"text":""},"desc":"Remove unused variable \"ImageIcon\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[326,358],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":135,"column":33,"nodeType":"JSXOpeningElement","endLine":139,"endColumn":35}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[553,556],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[553,556],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useRef } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\r\nimport { Upload, X, Loader2, Sparkles, Image as ImageIcon } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface ImageUploadExtractorProps {\r\n    type: 'grades' | 'flashcards' | 'timetable' | 'expenses'\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    onExtract: (data: any) => void\r\n    trigger?: React.ReactNode\r\n    title?: string\r\n    description?: string\r\n}\r\n\r\nexport function ImageUploadExtractor({\r\n    type,\r\n    onExtract,\r\n    trigger,\r\n    title = 'AI Extraction',\r\n    description = 'Upload an image to automatically extract data.'\r\n}: ImageUploadExtractorProps) {\r\n    const [open, setOpen] = useState(false)\r\n    const [selectedImage, setSelectedImage] = useState<string | null>(null)\r\n    const [file, setFile] = useState<File | null>(null)\r\n    const [loading, setLoading] = useState(false)\r\n    const fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0]\r\n        if (file) {\r\n            if (file.size > 5 * 1024 * 1024) {\r\n                toast.error('Image size must be less than 5MB')\r\n                return\r\n            }\r\n            setFile(file)\r\n            const reader = new FileReader()\r\n            reader.onload = (e) => setSelectedImage(e.target?.result as string)\r\n            reader.readAsDataURL(file)\r\n        }\r\n    }\r\n\r\n    const handleExtract = async () => {\r\n        if (!file) return\r\n\r\n        try {\r\n            setLoading(true)\r\n            const formData = new FormData()\r\n            formData.append('image', file)\r\n            formData.append('type', type)\r\n\r\n            const response = await fetch('/api/ai/extract', {\r\n                method: 'POST',\r\n                body: formData,\r\n            })\r\n\r\n            const result = await response.json()\r\n\r\n            if (!response.ok) {\r\n                throw new Error(result.error || 'Failed to extract data')\r\n            }\r\n\r\n            if (result.data) {\r\n                onExtract(result.data)\r\n                setOpen(false)\r\n                reset()\r\n                toast.success('Data extracted successfully!')\r\n            } else {\r\n                toast.error('No data found in response')\r\n            }\r\n        } catch (error: unknown) {\r\n            console.error('Extraction error:', error)\r\n            const errorMessage = error instanceof Error ? error.message : 'Failed to analyze image';\r\n            toast.error(errorMessage)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const reset = () => {\r\n        setSelectedImage(null)\r\n        setFile(null)\r\n        if (fileInputRef.current) fileInputRef.current.value = ''\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={(val) => {\r\n            setOpen(val)\r\n            if (!val) reset()\r\n        }}>\r\n            <DialogTrigger asChild>\r\n                {trigger || (\r\n                    <Button variant=\"outline\" className=\"gap-2\">\r\n                        <Sparkles className=\"h-4 w-4 text-violet-400\" />\r\n                        Extract from Image\r\n                    </Button>\r\n                )}\r\n            </DialogTrigger>\r\n            <DialogContent className=\"glass-card border-violet-500/20 max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"text-white flex items-center gap-2\">\r\n                        <Sparkles className=\"h-5 w-5 text-violet-400\" />\r\n                        {title}\r\n                    </DialogTitle>\r\n                    <p className=\"text-gray-400 text-sm\">\r\n                        {description}\r\n                    </p>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-4 pt-4\">\r\n                    {!selectedImage && !file ? (\r\n                        <div\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                            className=\"border-2 border-dashed border-white/10 hover:border-violet-500/50 hover:bg-white/5 rounded-xl h-48 flex flex-col items-center justify-center cursor-pointer transition-all group\"\r\n                        >\r\n                            <div className=\"p-4 rounded-full bg-white/5 group-hover:bg-violet-500/10 mb-3 transition-colors\">\r\n                                <Upload className=\"h-6 w-6 text-gray-400 group-hover:text-violet-400\" />\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-300 font-medium\">Click to upload file</p>\r\n                            <p className=\"text-xs text-gray-500 mt-1\">PNG, JPG, PDF up to 5MB</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"relative rounded-xl overflow-hidden border border-white/10 bg-black/40 aspect-video flex items-center justify-center\">\r\n                            {file?.type === 'application/pdf' ? (\r\n                                <div className=\"text-center\">\r\n                                    <div className=\"mx-auto bg-red-500/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mb-2\">\r\n                                        <div className=\"text-red-400 font-bold text-xl\">PDF</div>\r\n                                    </div>\r\n                                    <p className=\"text-sm text-gray-300\">{file.name}</p>\r\n                                </div>\r\n                            ) : (\r\n                                <img\r\n                                    src={selectedImage!}\r\n                                    alt=\"Preview\"\r\n                                    className=\"max-h-full max-w-full object-contain\"\r\n                                />\r\n                            )}\r\n                            <button\r\n                                onClick={reset}\r\n                                className=\"absolute top-2 right-2 p-1.5 rounded-full bg-black/50 hover:bg-black/70 text-white transition-colors\"\r\n                            >\r\n                                <X className=\"h-4 w-4\" />\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        onChange={handleFileSelect}\r\n                        accept=\"image/*,application/pdf\"\r\n                        className=\"hidden\"\r\n                    />\r\n\r\n                    <div className=\"flex justify-end gap-2 pt-2\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            onClick={() => setOpen(false)}\r\n                            disabled={loading}\r\n                            className=\"text-gray-400 hover:text-white\"\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleExtract}\r\n                            disabled={!file || loading}\r\n                            className=\"gradient-primary text-white gap-2 min-w-[120px]\"\r\n                        >\r\n                            {loading ? (\r\n                                <>\r\n                                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                    Analyzing...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Sparkles className=\"h-4 w-4\" />\r\n                                    Extract Data\r\n                                </>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\calendar\\CalendarView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\chat\\StudyBuddyWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\dashboard\\MotivationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\dashboard\\NextClassWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\dashboard\\NotesWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\dashboard\\QuickActions.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":6,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Plus"},"fix":{"range":[109,114],"text":""},"desc":"Remove unused variable \"Plus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BookOpen' is defined but never used.","line":8,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"BookOpen"},"fix":{"range":[125,140],"text":""},"desc":"Remove unused variable \"BookOpen\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":13,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calendar"},"fix":{"range":[173,188],"text":""},"desc":"Remove unused variable \"Calendar\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { Button } from '@/components/ui/button'\r\nimport {\r\n    Plus,\r\n    Timer,\r\n    BookOpen,\r\n    FileText,\r\n    CheckSquare,\r\n    Calendar,\r\n    Layers\r\n} from 'lucide-react'\r\n\r\nconst quickActions = [\r\n    {\r\n        label: 'New Note',\r\n        icon: FileText,\r\n        href: '/dashboard/notes/new',\r\n        color: 'from-blue-500 to-cyan-500',\r\n    },\r\n    {\r\n        label: 'Add Task',\r\n        icon: CheckSquare,\r\n        href: '/dashboard/tasks?new=true',\r\n        color: 'from-emerald-500 to-teal-500',\r\n    },\r\n    {\r\n        label: 'Start Focus',\r\n        icon: Timer,\r\n        href: '/dashboard/pomodoro',\r\n        color: 'from-rose-500 to-pink-500',\r\n    },\r\n    {\r\n        label: 'Study Cards',\r\n        icon: Layers,\r\n        href: '/dashboard/flashcards',\r\n        color: 'from-amber-500 to-orange-500',\r\n    },\r\n]\r\n\r\nexport function QuickActions() {\r\n    return (\r\n        <div className=\"glass-card rounded-2xl p-5\">\r\n            <h3 className=\"text-sm font-medium text-gray-400 mb-4\">Quick Actions</h3>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                {quickActions.map((action) => (\r\n                    <Link key={action.label} href={action.href}>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            className={`w-full h-auto py-4 flex-col gap-2 bg-gradient-to-br ${action.color} bg-opacity-10 hover:bg-opacity-20 border border-white/[0.08] hover:border-white/[0.15] rounded-xl transition-all duration-300 hover:scale-[1.02] hover:shadow-lg group`}\r\n                        >\r\n                            <div className=\"p-2 rounded-lg bg-white/10 group-hover:bg-white/20 transition-colors\">\r\n                                <action.icon className=\"h-5 w-5 text-white\" />\r\n                            </div>\r\n                            <span className=\"text-sm font-medium text-white\">{action.label}</span>\r\n                        </Button>\r\n                    </Link>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\dashboard\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\dashboard\\TasksWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\navigation-progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\notes\\NoteEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreVertical' is defined but never used.","line":34,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MoreVertical"},"fix":{"range":[883,902],"text":""},"desc":"Remove unused variable \"MoreVertical\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useEditor, EditorContent } from '@tiptap/react'\r\nimport StarterKit from '@tiptap/starter-kit'\r\nimport TaskList from '@tiptap/extension-task-list'\r\nimport TaskItem from '@tiptap/extension-task-item'\r\nimport Placeholder from '@tiptap/extension-placeholder'\r\nimport { useState, useCallback, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport {\r\n    ArrowLeft,\r\n    Bold,\r\n    Italic,\r\n    List,\r\n    ListOrdered,\r\n    CheckSquare,\r\n    Heading1,\r\n    Heading2,\r\n    Sparkles,\r\n    HelpCircle,\r\n    Undo,\r\n    Redo,\r\n    Loader2,\r\n    MoreVertical\r\n} from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport type { Note, QuizQuestion } from '@/types'\r\nimport { cn } from '@/lib/utils'\r\nimport { format } from 'date-fns'\r\nimport { SpeechToTextButton, TextToSpeechButton } from '@/components/ui/speech'\r\n\r\ninterface NoteEditorProps {\r\n    note: Note\r\n}\r\n\r\nexport function NoteEditor({ note: initialNote }: NoteEditorProps) {\r\n    const [note, setNote] = useState(initialNote)\r\n    const [title, setTitle] = useState(initialNote.title)\r\n    const [currentContent, setCurrentContent] = useState(initialNote.content || '')\r\n    const [saving, setSaving] = useState(false)\r\n    const [explainLoading, setExplainLoading] = useState(false)\r\n    const [quizLoading, setQuizLoading] = useState(false)\r\n    const [explainDialog, setExplainDialog] = useState<{ open: boolean; text: string; explanation: string }>({\r\n        open: false,\r\n        text: '',\r\n        explanation: '',\r\n    })\r\n    const [quizDialog, setQuizDialog] = useState<{ open: boolean; questions: QuizQuestion[]; currentIndex: number; answers: (number | null)[] }>({\r\n        open: false,\r\n        questions: [],\r\n        currentIndex: 0,\r\n        answers: [],\r\n    })\r\n    const router = useRouter()\r\n    const supabase = createClient()\r\n\r\n    const editor = useEditor({\r\n        extensions: [\r\n            StarterKit,\r\n            TaskList,\r\n            TaskItem.configure({\r\n                nested: true,\r\n            }),\r\n            Placeholder.configure({\r\n                placeholder: 'Start writing...',\r\n            }),\r\n        ],\r\n        content: note.content || '',\r\n        editorProps: {\r\n            attributes: {\r\n                class: 'prose prose-invert max-w-none focus:outline-none focus-visible:outline-none focus:ring-0 min-h-[50vh] px-1 py-2',\r\n            },\r\n        },\r\n        immediatelyRender: false,\r\n        onUpdate: ({ editor }) => {\r\n            setCurrentContent(editor.getHTML())\r\n        },\r\n    })\r\n\r\n    const saveNote = useCallback(async () => {\r\n        if (!editor) return\r\n        setSaving(true)\r\n\r\n        const content = editor.getHTML()\r\n        const plainText = editor.getText()\r\n\r\n        const { error } = await supabase\r\n            .from('notes')\r\n            .update({\r\n                title,\r\n                content,\r\n                plain_text: plainText,\r\n                updated_at: new Date().toISOString(),\r\n            })\r\n            .eq('id', note.id)\r\n\r\n        setSaving(false)\r\n        if (error) {\r\n            toast.error('Failed to save note')\r\n        } else {\r\n            setNote((prev) => ({ ...prev, title, content, plain_text: plainText, updated_at: new Date().toISOString() }))\r\n        }\r\n    }, [editor, title, note.id, supabase])\r\n\r\n    // Auto-save on content/title change (debounced 2s)\r\n    useEffect(() => {\r\n        const timeoutId = setTimeout(() => {\r\n            if (note.content !== currentContent || note.title !== title) {\r\n                saveNote()\r\n            }\r\n        }, 2000)\r\n\r\n        return () => clearTimeout(timeoutId)\r\n    }, [currentContent, title, saveNote, note.content, note.title])\r\n\r\n    // Manual Save Shortcut (Ctrl+S)\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if ((e.ctrlKey || e.metaKey) && e.key === 's') {\r\n                e.preventDefault()\r\n                saveNote()\r\n            }\r\n        }\r\n        window.addEventListener('keydown', handleKeyDown)\r\n        return () => window.removeEventListener('keydown', handleKeyDown)\r\n    }, [saveNote])\r\n\r\n    const explainSelection = async () => {\r\n        if (!editor) return\r\n\r\n        const { from, to } = editor.state.selection\r\n        const selectedText = editor.state.doc.textBetween(from, to, ' ')\r\n\r\n        if (!selectedText.trim()) {\r\n            toast.error('Please select some text to explain')\r\n            return\r\n        }\r\n\r\n        setExplainLoading(true)\r\n        setExplainDialog({ open: true, text: selectedText, explanation: '' })\r\n\r\n        try {\r\n            const response = await fetch('/api/ai/explain', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ text: selectedText }),\r\n            })\r\n\r\n            if (!response.ok) throw new Error('Failed to get explanation')\r\n\r\n            const data = await response.json()\r\n            setExplainDialog((prev) => ({ ...prev, explanation: data.explanation }))\r\n        } catch {\r\n            toast.error('Failed to get explanation')\r\n            setExplainDialog((prev) => ({ ...prev, open: false }))\r\n        } finally {\r\n            setExplainLoading(false)\r\n        }\r\n    }\r\n\r\n    const generateQuiz = async () => {\r\n        if (!editor) return\r\n\r\n        const content = editor.getText()\r\n        if (!content.trim() || content.length < 50) {\r\n            toast.error('Please add more content to generate a quiz (at least 50 characters)')\r\n            return\r\n        }\r\n\r\n        setQuizLoading(true)\r\n\r\n        try {\r\n            const response = await fetch('/api/ai/quiz', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ content }),\r\n            })\r\n\r\n            if (!response.ok) throw new Error('Failed to generate quiz')\r\n\r\n            const data = await response.json()\r\n            setQuizDialog({\r\n                open: true,\r\n                questions: data.questions,\r\n                currentIndex: 0,\r\n                answers: new Array(data.questions.length).fill(null),\r\n            })\r\n        } catch {\r\n            toast.error('Failed to generate quiz')\r\n        } finally {\r\n            setQuizLoading(false)\r\n        }\r\n    }\r\n\r\n    const selectAnswer = (answerIndex: number) => {\r\n        setQuizDialog((prev) => {\r\n            const newAnswers = [...prev.answers]\r\n            newAnswers[prev.currentIndex] = answerIndex\r\n            return { ...prev, answers: newAnswers }\r\n        })\r\n    }\r\n\r\n    const currentQuestion = quizDialog.questions[quizDialog.currentIndex]\r\n    const currentAnswer = quizDialog.answers[quizDialog.currentIndex]\r\n    const quizComplete = quizDialog.answers.every((a) => a !== null)\r\n    const correctCount = quizDialog.answers.filter(\r\n        (a, i) => a === quizDialog.questions[i]?.correctAnswer\r\n    ).length\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto flex flex-col h-[calc(100vh-8rem)]\">\r\n            {/* Top Bar - Minimal */}\r\n            <div className=\"flex items-center justify-between py-2 mb-2\">\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => router.push('/dashboard/notes')}\r\n                    className=\"text-gray-400 hover:text-white hover:bg-white/10\"\r\n                >\r\n                    <ArrowLeft className=\"h-5 w-5\" />\r\n                </Button>\r\n                <div className=\"flex items-center gap-1\">\r\n                    {saving && <Loader2 className=\"h-4 w-4 animate-spin text-gray-400\" />}\r\n                    <span className=\"text-xs text-gray-500\">\r\n                        {saving ? 'Saving...' : 'Saved'}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Note Content Area */}\r\n            <div className=\"flex-1 overflow-y-auto rounded-xl bg-white/[0.02] border border-white/10 p-4 mb-4\">\r\n                {/* Title Input */}\r\n                <Input\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    placeholder=\"Title\"\r\n                    className=\"text-xl font-semibold bg-transparent border-none text-white placeholder:text-gray-500 focus-visible:ring-0 px-0 mb-2\"\r\n                />\r\n\r\n                {/* Editor */}\r\n                <EditorContent editor={editor} />\r\n            </div>\r\n\r\n            {/* Timestamp */}\r\n            <div className=\"text-center mb-2\">\r\n                <span className=\"text-xs text-gray-500\">\r\n                    Edited at {format(new Date(note.updated_at), 'd MMM yyyy, h:mm a')}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Bottom Toolbar - Like Google Keep */}\r\n            <div className=\"flex items-center justify-between p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                <div className=\"flex items-center gap-1\">\r\n                    {/* Formatting */}\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleHeading({ level: 1 }).run()}\r\n                        active={editor?.isActive('heading', { level: 1 })}\r\n                        icon={Heading1}\r\n                        tooltip=\"Heading 1\"\r\n                    />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleHeading({ level: 2 }).run()}\r\n                        active={editor?.isActive('heading', { level: 2 })}\r\n                        icon={Heading2}\r\n                        tooltip=\"Heading 2\"\r\n                    />\r\n                    <div className=\"w-px h-5 bg-white/10 mx-1\" />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleBold().run()}\r\n                        active={editor?.isActive('bold')}\r\n                        icon={Bold}\r\n                        tooltip=\"Bold\"\r\n                    />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleItalic().run()}\r\n                        active={editor?.isActive('italic')}\r\n                        icon={Italic}\r\n                        tooltip=\"Italic\"\r\n                    />\r\n                    <div className=\"w-px h-5 bg-white/10 mx-1\" />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleBulletList().run()}\r\n                        active={editor?.isActive('bulletList')}\r\n                        icon={List}\r\n                        tooltip=\"Bullet List\"\r\n                    />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleOrderedList().run()}\r\n                        active={editor?.isActive('orderedList')}\r\n                        icon={ListOrdered}\r\n                        tooltip=\"Numbered List\"\r\n                    />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().toggleTaskList().run()}\r\n                        active={editor?.isActive('taskList')}\r\n                        icon={CheckSquare}\r\n                        tooltip=\"Checklist\"\r\n                    />\r\n                    <div className=\"w-px h-5 bg-white/10 mx-1\" />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().undo().run()}\r\n                        disabled={!editor?.can().undo()}\r\n                        icon={Undo}\r\n                        tooltip=\"Undo\"\r\n                    />\r\n                    <ToolbarButton\r\n                        onClick={() => editor?.chain().focus().redo().run()}\r\n                        disabled={!editor?.can().redo()}\r\n                        icon={Redo}\r\n                        tooltip=\"Redo\"\r\n                    />\r\n                </div>\r\n\r\n                {/* AI Actions */}\r\n                <div className=\"flex items-center gap-1\">\r\n                    <SpeechToTextButton\r\n                        onTranscript={(text) => {\r\n                            if (editor) {\r\n                                editor.chain().focus().insertContent(text + ' ').run()\r\n                            }\r\n                        }}\r\n                    />\r\n                    <TextToSpeechButton text={editor?.getText() || ''} />\r\n                    <div className=\"w-px h-5 bg-white/10 mx-1\" />\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={explainSelection}\r\n                        disabled={explainLoading}\r\n                        className=\"text-gray-400 hover:text-purple-400 hover:bg-purple-500/10 text-xs\"\r\n                    >\r\n                        {explainLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <HelpCircle className=\"h-4 w-4 mr-1\" />}\r\n                        Explain\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={generateQuiz}\r\n                        disabled={quizLoading}\r\n                        className=\"text-gray-400 hover:text-pink-400 hover:bg-pink-500/10 text-xs\"\r\n                    >\r\n                        {quizLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Sparkles className=\"h-4 w-4 mr-1\" />}\r\n                        Quiz\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Explain Dialog */}\r\n            <Dialog open={explainDialog.open} onOpenChange={(open) => setExplainDialog((prev) => ({ ...prev, open }))}>\r\n                <DialogContent className=\"bg-gray-900 border-white/10 max-w-lg\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"text-white flex items-center gap-2\">\r\n                            <HelpCircle className=\"h-5 w-5 text-purple-400\" />\r\n                            Explanation\r\n                        </DialogTitle>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"p-3 rounded-lg bg-white/5 border border-white/10\">\r\n                            <p className=\"text-sm text-gray-400 mb-1\">Selected text:</p>\r\n                            <p className=\"text-white\">&quot;{explainDialog.text}&quot;</p>\r\n                        </div>\r\n                        {explainLoading ? (\r\n                            <div className=\"flex items-center justify-center py-8\">\r\n                                <Loader2 className=\"h-8 w-8 animate-spin text-purple-400\" />\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20 max-h-[60vh] overflow-y-auto prose prose-invert prose-sm max-w-none\">\r\n                                <ReactMarkdown>\r\n                                    {explainDialog.explanation}\r\n                                </ReactMarkdown>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Quiz Dialog */}\r\n            <Dialog open={quizDialog.open} onOpenChange={(open) => setQuizDialog((prev) => ({ ...prev, open }))}>\r\n                <DialogContent className=\"bg-gray-900 border-white/10 max-w-lg\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"text-white flex items-center gap-2\">\r\n                            <Sparkles className=\"h-5 w-5 text-pink-400\" />\r\n                            Quiz - Question {quizDialog.currentIndex + 1} of {quizDialog.questions.length}\r\n                        </DialogTitle>\r\n                    </DialogHeader>\r\n                    {currentQuestion && (\r\n                        <div className=\"space-y-4\">\r\n                            <p className=\"text-white font-medium\">{currentQuestion.question}</p>\r\n                            <div className=\"space-y-2\">\r\n                                {currentQuestion.options.map((option, index) => (\r\n                                    <button\r\n                                        key={index}\r\n                                        onClick={() => selectAnswer(index)}\r\n                                        className={cn(\r\n                                            \"w-full p-3 rounded-lg text-left transition-all\",\r\n                                            currentAnswer === index\r\n                                                ? currentAnswer === currentQuestion.correctAnswer\r\n                                                    ? \"bg-green-500/20 border-green-500/50 text-green-300\"\r\n                                                    : \"bg-red-500/20 border-red-500/50 text-red-300\"\r\n                                                : \"bg-white/5 border-white/10 text-white hover:bg-white/10\",\r\n                                            \"border\"\r\n                                        )}\r\n                                        disabled={currentAnswer !== null}\r\n                                    >\r\n                                        {option}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                            {currentAnswer !== null && currentQuestion.explanation && (\r\n                                <p className=\"text-sm text-gray-400 p-3 rounded-lg bg-white/5\">\r\n                                    üí° {currentQuestion.explanation}\r\n                                </p>\r\n                            )}\r\n                            <div className=\"flex justify-between pt-2\">\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    onClick={() => setQuizDialog((prev) => ({ ...prev, currentIndex: prev.currentIndex - 1 }))}\r\n                                    disabled={quizDialog.currentIndex === 0}\r\n                                    className=\"text-gray-400 hover:text-white\"\r\n                                >\r\n                                    Previous\r\n                                </Button>\r\n                                {quizDialog.currentIndex < quizDialog.questions.length - 1 ? (\r\n                                    <Button\r\n                                        onClick={() => setQuizDialog((prev) => ({ ...prev, currentIndex: prev.currentIndex + 1 }))}\r\n                                        disabled={currentAnswer === null}\r\n                                        className=\"bg-gradient-to-r from-purple-500 to-pink-500\"\r\n                                    >\r\n                                        Next\r\n                                    </Button>\r\n                                ) : quizComplete ? (\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-white font-semibold\">\r\n                                            Score: {correctCount}/{quizDialog.questions.length}\r\n                                        </p>\r\n                                        <p className=\"text-sm text-gray-400\">\r\n                                            {correctCount === quizDialog.questions.length ? 'üéâ Perfect!' : 'Keep practicing!'}\r\n                                        </p>\r\n                                    </div>\r\n                                ) : null}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ToolbarButton({\r\n    onClick,\r\n    active,\r\n    disabled,\r\n    icon: Icon,\r\n    tooltip,\r\n}: {\r\n    onClick: () => void\r\n    active?: boolean\r\n    disabled?: boolean\r\n    icon: React.ComponentType<{ className?: string }>\r\n    tooltip?: string\r\n}) {\r\n    return (\r\n        <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n            title={tooltip}\r\n            className={cn(\r\n                \"h-8 w-8\",\r\n                active ? \"bg-white/10 text-white\" : \"text-gray-400 hover:text-white hover:bg-white/10\",\r\n                disabled && \"opacity-50 cursor-not-allowed\"\r\n            )}\r\n        >\r\n            <Icon className=\"h-4 w-4\" />\r\n        </Button>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\notes\\NotesList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\tasks\\TasksManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\timetable\\TimetableGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":202,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":202,"endColumn":59}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":187,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6764,6767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6764,6767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog'\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Plus, Clock, Trash2 } from 'lucide-react'\r\nimport type { ClassSchedule } from '@/types'\r\nimport { toast } from 'sonner'\r\nimport { cn } from '@/lib/utils'\r\nimport { ImageUploadExtractor } from '@/components/ai/ImageUploadExtractor'\r\n\r\ninterface TimetableGridProps {\r\n    initialClasses: ClassSchedule[]\r\n    userId: string\r\n}\r\n\r\nconst days = [\r\n    { id: 1, label: 'Mon' },\r\n    { id: 2, label: 'Tue' },\r\n    { id: 3, label: 'Wed' },\r\n    { id: 4, label: 'Thu' },\r\n    { id: 5, label: 'Fri' },\r\n    { id: 6, label: 'Sat' },\r\n    { id: 0, label: 'Sun' },\r\n]\r\n\r\n// Extended hours to cover 8 AM to 8 PM (university typical)\r\nconst startHour = 8\r\nconst endHour = 20\r\nconst hours = Array.from({ length: endHour - startHour + 1 }, (_, i) => i + startHour)\r\n\r\nconst colors = [\r\n    '#6366f1', // Indigo\r\n    '#8b5cf6', // Purple\r\n    '#ec4899', // Pink\r\n    '#f43f5e', // Rose\r\n    '#f97316', // Orange\r\n    '#eab308', // Yellow\r\n    '#22c55e', // Green\r\n    '#14b8a6', // Teal\r\n    '#06b6d4', // Cyan\r\n    '#3b82f6', // Blue\r\n]\r\n\r\nexport function TimetableGrid({ initialClasses, userId }: TimetableGridProps) {\r\n    const [classes, setClasses] = useState<ClassSchedule[]>(initialClasses)\r\n    const [createDialog, setCreateDialog] = useState(false)\r\n    const [newClass, setNewClass] = useState({\r\n        name: '',\r\n        short_name: '',\r\n        instructor: '',\r\n        location: '',\r\n        color: colors[0],\r\n        day_of_week: 1,\r\n        start_time: '08:00',\r\n        end_time: '09:00',\r\n    })\r\n    const supabase = createClient()\r\n\r\n    const createClass = async () => {\r\n        if (!newClass.name.trim()) {\r\n            toast.error('Class name is required')\r\n            return\r\n        }\r\n\r\n        const { data, error } = await supabase\r\n            .from('class_schedules')\r\n            .insert({\r\n                user_id: userId,\r\n                ...newClass,\r\n            })\r\n            .select()\r\n            .single()\r\n\r\n        if (error) {\r\n            toast.error('Failed to create class')\r\n            return\r\n        }\r\n\r\n        setClasses((prev) => [...prev, data as ClassSchedule])\r\n        setCreateDialog(false)\r\n        setNewClass({\r\n            name: '',\r\n            short_name: '',\r\n            instructor: '',\r\n            location: '',\r\n            color: colors[0],\r\n            day_of_week: 1,\r\n            start_time: '08:00',\r\n            end_time: '09:00',\r\n        })\r\n        toast.success('Class added to timetable')\r\n    }\r\n\r\n    const deleteClass = async (classId: string) => {\r\n        const { error } = await supabase.from('class_schedules').delete().eq('id', classId)\r\n\r\n        if (error) {\r\n            toast.error('Failed to delete class')\r\n            return\r\n        }\r\n\r\n        setClasses((prev) => prev.filter((c) => c.id !== classId))\r\n        toast.success('Class deleted')\r\n    }\r\n\r\n    // Horizontal Layout Helper\r\n    const getClassStyleHorizontal = (cls: ClassSchedule) => {\r\n        const [startH, startM] = cls.start_time.split(':').map(Number)\r\n        const [endH, endM] = cls.end_time.split(':').map(Number)\r\n\r\n        // Calculate offset from startHour (8 AM)\r\n        const totalStartMinutes = (startH * 60 + startM) - (startHour * 60)\r\n        const durationMinutes = (endH * 60 + endM) - (startH * 60 + startM)\r\n\r\n        return {\r\n            left: `${(totalStartMinutes / ((endHour - startHour + 1) * 60)) * 100}%`,\r\n            width: `${(durationMinutes / ((endHour - startHour + 1) * 60)) * 100}%`,\r\n            backgroundColor: cls.color + '40',\r\n            borderLeft: `3px solid ${cls.color}`,\r\n            zIndex: 10\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-7\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n                        <Clock className=\"h-6 w-6 text-cyan-400\" />\r\n                        Class Timetable\r\n                    </h1>\r\n                    <p className=\"text-gray-400 text-sm mt-1\">\r\n                        Visualize your weekly schedule\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={async () => {\r\n                            if (!confirm('Are you sure you want to clear your entire schedule?')) return\r\n                            const { error } = await supabase.from('class_schedules').delete().eq('user_id', userId)\r\n                            if (error) toast.error('Failed to clear schedule')\r\n                            else {\r\n                                setClasses([])\r\n                                toast.success('Schedule cleared')\r\n                            }\r\n                        }}\r\n                        className=\"text-red-400 border-red-500/30 hover:bg-red-500/10\"\r\n                    >\r\n                        <Trash2 className=\"mr-2 h-4 w-4\" /> Clear All\r\n                    </Button>\r\n                    <ImageUploadExtractor\r\n                        type=\"timetable\"\r\n                        title=\"Extract Schedule\"\r\n                        description=\"Upload a picture of your class timetable.\"\r\n                        onExtract={async (data) => {\r\n                            if (data.classes && Array.isArray(data.classes)) {\r\n                                try {\r\n                                    const dayMap: Record<string, number> = {\r\n                                        'Monday': 1, 'Mon': 1,\r\n                                        'Tuesday': 2, 'Tue': 2,\r\n                                        'Wednesday': 3, 'Wed': 3,\r\n                                        'Thursday': 4, 'Thu': 4,\r\n                                        'Friday': 5, 'Fri': 5,\r\n                                        'Saturday': 6, 'Sat': 6,\r\n                                        'Sunday': 0, 'Sun': 0\r\n                                    }\r\n\r\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                                    const classesToInsert = data.classes.map((cls: any) => {\r\n                                        let start = '09:00'\r\n                                        let end = '10:00'\r\n\r\n                                        if (cls.time) {\r\n                                            const parts = cls.time.replace('to', '-').split('-').map((s: string) => s.trim())\r\n                                            if (parts.length === 2) {\r\n                                                try {\r\n                                                    const clean = (t: string) => {\r\n                                                        const [time] = t.split(' ')\r\n                                                        return time.includes(':') ? time : `${time}:00`\r\n                                                    }\r\n\r\n                                                    start = clean(parts[0])\r\n                                                    end = clean(parts[1])\r\n                                                } catch (e) { }\r\n                                            }\r\n                                        }\r\n\r\n                                        return {\r\n                                            user_id: userId,\r\n                                            name: cls.subject || cls.name || 'Unknown Class',\r\n                                            day_of_week: dayMap[cls.day] ?? 1,\r\n                                            start_time: start,\r\n                                            end_time: end,\r\n                                            location: cls.location || '',\r\n                                            color: colors[Math.floor(Math.random() * colors.length)]\r\n                                        }\r\n                                    })\r\n\r\n                                    const { data: inserted, error } = await supabase\r\n                                        .from('class_schedules')\r\n                                        .insert(classesToInsert)\r\n                                        .select()\r\n\r\n                                    if (error) throw error\r\n\r\n                                    if (inserted) {\r\n                                        setClasses(prev => [...prev, ...inserted as ClassSchedule[]])\r\n                                        toast.success(`Added ${inserted.length} classes from timetable`)\r\n                                    }\r\n                                } catch (e: unknown) {\r\n                                    console.error('Timetable extract error:', e)\r\n                                    toast.error('Failed to import timetable')\r\n                                }\r\n                            }\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        onClick={() => setCreateDialog(true)}\r\n                        className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600\"\r\n                    >\r\n                        <Plus className=\"mr-2 h-4 w-4\" /> Add Class\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Timetable Grid (Horizontal: Days as Rows) */}\r\n            <div className=\"overflow-x-auto pb-4 custom-scrollbar\">\r\n                <div className=\"min-w-[1000px]\"> {/* Wide container for time axis */}\r\n\r\n                    {/* Time Header (X-Axis) */}\r\n                    <div className=\"flex border-b border-white/10 mb-2\">\r\n                        <div className=\"w-20 shrink-0 bg-white/5 backdrop-blur sticky left-0 z-20 border-r border-white/10\" /> {/* Corner */}\r\n                        <div className=\"flex-1 flex relative h-10\">\r\n                            {hours.map((hour) => (\r\n                                <div key={hour} className=\"flex-1 border-l border-white/5 text-xs text-gray-400 pl-2 pt-2\">\r\n                                    {hour.toString().padStart(2, '0')}:00\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Day Rows */}\r\n                    <div className=\"space-y-2\">\r\n                        {days.map((day) => {\r\n                            const dayClasses = classes.filter(c => c.day_of_week === day.id)\r\n\r\n                            return (\r\n                                <div key={day.id} className=\"flex h-20 relative group\"> {/* Fixed height rows (h-20 = 80px) to prevent scroll */}\r\n                                    {/* Day Label (Sticky Left) */}\r\n                                    <div className=\"w-20 shrink-0 flex items-center justify-center font-bold text-white bg-white/5 backdrop-blur sticky left-0 z-20 border-r border-white/10 rounded-l-lg group-hover:bg-white/10 transition-colors\">\r\n                                        {day.label}\r\n                                    </div>\r\n\r\n                                    {/* Timeline Track */}\r\n                                    <div className=\"flex-1 bg-white/[0.02] relative rounded-r-lg border border-white/[0.05]\">\r\n                                        {/* Hour Guides */}\r\n                                        <div className=\"absolute inset-0 flex pointer-events-none\">\r\n                                            {hours.map(h => (\r\n                                                <div key={h} className=\"flex-1 border-l border-white/5\" />\r\n                                            ))}\r\n                                        </div>\r\n\r\n                                        {/* Class Blocks */}\r\n                                        <div className=\"absolute inset-0 top-1 bottom-1\">\r\n                                            {dayClasses.map((cls) => (\r\n                                                <div\r\n                                                    key={cls.id}\r\n                                                    className=\"absolute top-0 bottom-0 rounded-md p-2 cursor-pointer overflow-hidden hover:z-30 transition-all hover:scale-[1.02] hover:shadow-lg group/card\"\r\n                                                    style={getClassStyleHorizontal(cls)}\r\n                                                >\r\n                                                    <div className=\"flex flex-col h-full justify-between\">\r\n                                                        <div>\r\n                                                            <p className=\"text-[11px] font-bold text-white leading-tight truncate\">\r\n                                                                {cls.short_name || cls.name}\r\n                                                            </p>\r\n                                                            <p className=\"text-[10px] text-white/70 truncate\">\r\n                                                                {cls.location}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                        <p className=\"text-[9px] text-white/50 truncate\">\r\n                                                            {cls.start_time} - {cls.end_time}\r\n                                                        </p>\r\n                                                    </div>\r\n\r\n                                                    {/* Delete Button (Hover) */}\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"absolute top-1 right-1 h-5 w-5 opacity-0 group-hover/card:opacity-100 transition-opacity text-white/50 hover:text-red-400 hover:bg-transparent\"\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation()\r\n                                                            deleteClass(cls.id)\r\n                                                        }}\r\n                                                    >\r\n                                                        <Trash2 className=\"h-3 w-3\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Create Class Dialog */}\r\n            <Dialog open={createDialog} onOpenChange={setCreateDialog}>\r\n                <DialogContent className=\"bg-gray-900 border-white/10 max-w-md\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"text-white\">Add Class</DialogTitle>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-gray-300\">Class Name</Label>\r\n                                <Input\r\n                                    value={newClass.name}\r\n                                    onChange={(e) => setNewClass((prev) => ({ ...prev, name: e.target.value }))}\r\n                                    placeholder=\"Mathematics\"\r\n                                    className=\"bg-white/5 border-white/10 text-white\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-gray-300\">Short Name</Label>\r\n                                <Input\r\n                                    value={newClass.short_name}\r\n                                    onChange={(e) => setNewClass((prev) => ({ ...prev, short_name: e.target.value }))}\r\n                                    placeholder=\"MATH101\"\r\n                                    className=\"bg-white/5 border-white/10 text-white\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-gray-300\">Instructor</Label>\r\n                                <Input\r\n                                    value={newClass.instructor}\r\n                                    onChange={(e) => setNewClass((prev) => ({ ...prev, instructor: e.target.value }))}\r\n                                    placeholder=\"Dr. Smith\"\r\n                                    className=\"bg-white/5 border-white/10 text-white\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-gray-300\">Location</Label>\r\n                                <Input\r\n                                    value={newClass.location}\r\n                                    onChange={(e) => setNewClass((prev) => ({ ...prev, location: e.target.value }))}\r\n                                    placeholder=\"Room 302\"\r\n                                    className=\"bg-white/5 border-white/10 text-white\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label className=\"text-gray-300\">Day</Label>\r\n                            <Select\r\n                                value={newClass.day_of_week.toString()}\r\n                                onValueChange={(value) =>\r\n                                    setNewClass((prev) => ({ ...prev, day_of_week: parseInt(value) }))\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"bg-white/5 border-white/10 text-white\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent className=\"bg-gray-900 border-white/10\">\r\n                                    {days.map((day) => (\r\n                                        <SelectItem key={day.id} value={day.id.toString()}>\r\n                                            {day.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-gray-300\">Start Time</Label>\r\n                                <Input\r\n                                    type=\"time\"\r\n                                    value={newClass.start_time}\r\n                                    onChange={(e) => setNewClass((prev) => ({ ...prev, start_time: e.target.value }))}\r\n                                    className=\"bg-white/5 border-white/10 text-white\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-gray-300\">End Time</Label>\r\n                                <Input\r\n                                    type=\"time\"\r\n                                    value={newClass.end_time}\r\n                                    onChange={(e) => setNewClass((prev) => ({ ...prev, end_time: e.target.value }))}\r\n                                    className=\"bg-white/5 border-white/10 text-white\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label className=\"text-gray-300\">Color</Label>\r\n                            <div className=\"flex gap-2 flex-wrap\">\r\n                                {colors.map((color) => (\r\n                                    <button\r\n                                        key={color}\r\n                                        onClick={() => setNewClass((prev) => ({ ...prev, color }))}\r\n                                        className={cn(\r\n                                            \"w-8 h-8 rounded-full transition-all\",\r\n                                            newClass.color === color ? \"ring-2 ring-offset-2 ring-offset-gray-900 ring-white\" : \"\"\r\n                                        )}\r\n                                        style={{ backgroundColor: color }}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        <Button\r\n                            onClick={createClass}\r\n                            className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600\"\r\n                        >\r\n                            Add Class\r\n                        </Button>\r\n                    </div>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div >\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\speech.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[828,831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[828,831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1038,1041],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1038,1041],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1075,1078],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1075,1078],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1434,1437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1434,1437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1995,1998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1995,1998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\CODING\\Web Development\\Projects\\Fullstack\\student-hub\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]